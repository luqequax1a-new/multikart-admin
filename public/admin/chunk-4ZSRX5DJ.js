import{b as fe,c as _e,d as he,h as ye}from"./chunk-KXWB4RBN.js";import{b as me}from"./chunk-I4EG6FBQ.js";import{a as ue}from"./chunk-Y2Z4WWCH.js";import{l as pe,m as ce}from"./chunk-HMBOAMDM.js";import{a as F}from"./chunk-VO736VT2.js";import{a as de}from"./chunk-MLWMDQKS.js";import{B as oe,C as ne,D as ae,c as X,d as Y,e as S,g as Z,h as ee,k as y,m as te,q as ie,qa as B,t as re}from"./chunk-IKKQDHIF.js";import{e as Q,g as W}from"./chunk-OTODDIHK.js";import{c as se,d as le}from"./chunk-AWERIOQH.js";import{Ad as H,Bc as w,Ed as J,Fc as K,Ib as u,J as E,Ja as P,Kb as f,Lc as o,Mc as n,Pb as c,Pc as O,Qb as l,Rb as d,Sb as v,Y as L,Yc as j,Z as q,Za as A,_b as I,bb as r,bc as k,dc as _,g as x,gb as N,ja as m,mc as G,n as M,ob as R,qa as g,qc as U,ra as b,rc as h,sc as C,t as T,tc as $,td as z,ub as D,va as V}from"./chunk-KIZZVTEV.js";var ve=()=>[];function Ce(t,a){t&1&&(l(0,"div",4),h(1),o(2,"translate"),d()),t&2&&(r(),C(n(2,1,"license_key_is_required")))}function ge(t,a){if(t&1&&(v(0,"select2",5),o(1,"translate"),o(2,"translate")),t&2){let p=_();c("noResultMessage",w(n(1,4,"no_data_found")))("data",p.separators.length?p.separators:K(8,ve))("placeholder",n(2,6,"select_separator"))}}function be(t,a){t&1&&(l(0,"div",4),h(1),o(2,"translate"),d()),t&2&&(r(),C(n(2,1,"separator_is_required")))}function we(t,a){if(t&1&&(l(0,"div",13),v(1,"img",14),d(),h(2)),t&2){let p=a.data;r(),U("img-fluid selection-image"),c("src",p.image,A),r(),$(" ",p.name," ")}}function Se(t,a){if(t&1){let p=I();l(0,"select2",12),o(1,"translate"),o(2,"async"),o(3,"async"),o(4,"translate"),k("update",function(s){g(p);let i=_();return b(i.updateProduct(s))})("close",function(s){g(p);let i=_();return b(i.productDropdown(s))})("search",function(s){g(p);let i=_();return b(i.searchProduct(s))}),D(5,we,3,4,"ng-template",null,0,O),d()}if(t&2){let p,e=G(6),s=_();c("noResultMessage",w(n(1,6,"no_data_found")))("templates",e)("data",(p=n(2,8,s.product$))!=null&&p.length?n(3,10,s.product$):K(14,ve))("placeholder",n(4,12,"select_product"))("customSearchEnabled",!0)}}function xe(t,a){t&1&&(l(0,"div",4),h(1),o(2,"translate"),d()),t&2&&(r(),C(n(2,1,"product_is_required")))}var ze=(()=>{let a=class a{constructor(){this.store=m(B),this.router=m(W),this.route=m(Q),this.formBuilder=m(oe),this.renderer=m(N),this.document=m(V),this.type=j(void 0),this.product$=m(B).select(me.digitalProducts),this.search=new x,this.destroy$=new x,this.separators=[{value:"comma",label:"Comma ( , )"},{value:"semicolon",label:"Semicolon ( ; )"},{value:"pipe",label:"Pipe ( | )"},{value:"newline",label:"Newline"}];let e=m(P);this.isBrowser=J(e),this.form=this.formBuilder.group({license_key:new y("",[S.required]),separator:new y("",[S.required]),product_id:new y("",[S.required]),variation_id:new y(""),status:new y(1)})}ngOnInit(){this.store.dispatch(new F({status:1,is_approved:1,paginate:15})),this.route.params.pipe(L(e=>e.id?this.store.dispatch(new _e(e.id)).pipe(T(()=>this.store.select(ye.selectedLicenseKey))):M()),q(this.destroy$)).subscribe(e=>{this.licenseKey=e,this.form.patchValue({license_key:this.licenseKey?.license_key,separator:this.licenseKey?.separator,product_id:this.licenseKey?.product_id,variation_id:this.licenseKey?.variation_id,status:this.licenseKey?.status})}),this.search.pipe(E(300)).subscribe(e=>{this.store.dispatch(new F({status:1,is_approved:1,paginate:15,search:e})),this.renderer.addClass(this.document.body,"loader-none")})}productDropdown(e){e.innerSearchText&&this.search.next("")}searchProduct(e){this.search.next(e.search)}updateProduct(e){e&&e.options.length&&e.options[0].data&&(this.form.controls.product_id.setValue(e.options[0].data.product_id),this.form.controls.variation_id.setValue(e.options[0].data.variation_id?e.options[0].data.variation_id:null))}submit(){this.form.markAllAsTouched();let e=new fe(this.form.value);this.type()=="edit"&&this.licenseKey?.id&&(e=new he(this.form.value,this.licenseKey.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/license-key")}})}};a.\u0275fac=function(s){return new(s||a)},a.\u0275cmp=R({type:a,selectors:[["app-form-license-key"]],inputs:{type:[1,"type"]},decls:21,vars:30,consts:[["template",""],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["formControlName","license_key","rows","3",1,"form-control",3,"placeholder"],[1,"invalid-feedback"],["formControlName","separator",1,"custom-select","d-block",3,"data","placeholder","noResultMessage"],[1,"custom-select",3,"templates","data","placeholder","customSearchEnabled","noResultMessage"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"custom-select",3,"update","close","search","templates","data","placeholder","customSearchEnabled","noResultMessage"],[1,"image"],["alt","img",3,"src"]],template:function(s,i){s&1&&(l(0,"form",1),k("ngSubmit",function(){return i.submit()}),l(1,"app-form-fields",2),o(2,"translate"),v(3,"textarea",3),o(4,"translate"),u(5,Ce,3,3,"div",4),d(),l(6,"app-form-fields",2),u(7,ge,3,9,"select2",5),u(8,be,3,3,"div",4),d(),l(9,"app-form-fields",2),u(10,Se,7,15,"select2",6),u(11,xe,3,3,"div",4),d(),l(12,"app-form-fields",2),o(13,"translate"),l(14,"div",7)(15,"label",8),v(16,"input",9)(17,"span",10),d()()(),l(18,"app-button",11),h(19),o(20,"translate"),d()()),s&2&&(c("formGroup",i.form),r(),c("label",n(2,22,"license_key"))("for","license_key")("required",!0),r(2),c("placeholder",w(n(4,24,"enter_license_key"))),r(2),f(i.form.controls.license_key.touched&&(i.form.controls.license_key.errors!=null&&i.form.controls.license_key.errors.required)?5:-1),r(),c("label","separator")("for","separator")("required",!0),r(),f(i.isBrowser?7:-1),r(),f(i.form.controls.separator.touched&&(i.form.controls.separator.errors!=null&&i.form.controls.separator.errors.required)?8:-1),r(),c("label","product")("for","product")("required",!0),r(),f(i.isBrowser?10:-1),r(),f(i.form.controls.product_id.touched&&(i.form.controls.product_id.errors!=null&&i.form.controls.product_id.errors.required)?11:-1),r(),c("label",n(13,26,"status"))("for","status")("required",!1),r(6),c("id","key_btn"),r(),C(n(20,28,i.type()==="create"?"save_key":"update_key")))},dependencies:[le,ne,te,Y,X,Z,ee,ae,ie,re,H,ce,pe,ue,de,se,z],encapsulation:2});let t=a;return t})();export{ze as a};

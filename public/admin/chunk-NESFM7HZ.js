import{B as j,D as q,d as S,e as u,g as E,h as D,m as T,n as V,q as B,t as z,x as A,y as U,z as K}from"./chunk-IKKQDHIF.js";import{c as G,d as L}from"./chunk-AWERIOQH.js";import{Ad as I,Fb as C,Lc as p,Mc as g,Pb as d,Qb as o,Rb as r,Sb as P,bb as i,bc as v,dc as O,ja as w,ob as F,oc as M,qd as y,rc as a,tc as l,ub as _,wb as x}from"./chunk-KIZZVTEV.js";function N(s,m){if(s&1&&(o(0,"small",26),a(1),r()),s&2){let h=O();i(),l(" ",h.getFieldError("name")," ")}}function $(s,m){if(s&1&&(o(0,"small",27),a(1),r()),s&2){let h=O();i(),l(" ",h.getFieldError("text")," ")}}function R(s,m){if(s&1&&(o(0,"small",28),a(1),r()),s&2){let h=O();i(),l(" ",h.getFieldError("step")," ")}}function H(s,m){s&1&&P(0,"span",29)}var st=(()=>{let m=class m{constructor(){this.fb=w(j),this.loading=!1,this.initialData=null,this.formSubmit=new x,this.formCancel=new x,this.formChange=new x,this.lastSavedTime=null,this.validationErrors={}}ngOnInit(){this.initForm(),this.initialData&&this.populateForm()}initForm(){this.unitsForm=this.fb.group({name:["",[u.required,u.maxLength(50)]],text:["",[u.required,u.maxLength(10)]],step:[1,[u.required,u.min(.1),u.pattern(/^\d+(\.\d{1})?$/)]],is_active:[!0]}),this.unitsForm.valueChanges.subscribe(()=>{this.formChange.emit(this.unitsForm.dirty)})}populateForm(){if(this.initialData){let t=this.initialData.step%1===0?parseInt(this.initialData.step.toString()):this.initialData.step;this.unitsForm.patchValue({name:this.initialData.name,text:this.initialData.text,step:t,is_active:this.initialData.is_active})}}onSubmit(){if(this.unitsForm.valid){let t={name:this.unitsForm.value.name.trim(),text:this.unitsForm.value.text.trim(),step:Number(this.unitsForm.value.step),is_active:this.unitsForm.value.is_active};this.formSubmit.emit(t)}else this.markFormGroupTouched(),this.focusFirstInvalidField()}onCancel(){this.formCancel.emit()}markFormGroupTouched(){Object.keys(this.unitsForm.controls).forEach(t=>{this.unitsForm.get(t)?.markAsTouched()})}getFieldError(t){if(this.validationErrors[t])return this.validationErrors[t];let n=this.unitsForm.get(t);if(n?.errors&&n.touched){if(n.errors.required)return`${t==="name"?"Ad":t==="text"?"K\u0131sa Metin":"Step"} zorunludur.`;if(n.errors.maxLength)return`${t==="name"?"Ad":"K\u0131sa Metin"} en fazla ${n.errors.maxLength.requiredLength} karakter olmal\u0131d\u0131r.`;if(n.errors.min)return"Step de\u011Feri 0'dan b\xFCy\xFCk olmal\u0131d\u0131r."}return""}isFieldInvalid(t){let n=this.unitsForm.get(t);return!!(n?.invalid&&n?.touched)||!!this.validationErrors[t]}onStepInput(t){let n=t.target.value;if(parseFloat(n)<=0){t.target.value="0.1",this.unitsForm.patchValue({step:.1});return}let e=n.split(".");if(e[1]&&e[1].length>1){let c=e[0]+"."+e[1].substring(0,1);t.target.value=c,this.unitsForm.patchValue({step:parseFloat(c)})}}formatStepValue(t){return t?t%1===0?parseInt(t.toString()).toString():t.toString():""}focusFirstInvalidField(){let t=Object.keys(this.unitsForm.controls).find(n=>this.unitsForm.get(n)?.invalid);t&&document.getElementById(t)?.focus()}setValidationErrors(t){this.validationErrors=t,Object.keys(t).forEach(n=>{this.unitsForm.get(n)?.markAsTouched()})}clearValidationErrors(){this.validationErrors={}}};m.\u0275fac=function(n){return new(n||m)},m.\u0275cmp=F({type:m,selectors:[["app-form-units"]],inputs:{loading:"loading",initialData:"initialData"},outputs:{formSubmit:"formSubmit",formCancel:"formCancel",formChange:"formChange"},decls:53,vars:44,consts:[["novalidate","",1,"position-relative","units-form",3,"ngSubmit","formGroup"],[1,"row","g-4"],[1,"col-md-6"],[1,"mb-0"],["for","name",1,"form-label","fw-600","mb-2"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Birim ad\u0131n\u0131 giriniz","maxlength","50",1,"form-control"],["id","name-help",1,"text-muted","d-block","mt-1"],["id","name-error","class","text-danger mt-1",4,"ngIf"],["for","text",1,"form-label","fw-600","mb-2"],["type","text","id","text","formControlName","text","placeholder","K\u0131sa metin (\xFCr\xFCn yan\u0131nda)","maxlength","10",1,"form-control"],["id","text-help",1,"text-muted","d-block","mt-1"],["id","text-error","class","text-danger mt-1",4,"ngIf"],["for","step",1,"form-label","fw-600","mb-2"],["type","number","id","step","formControlName","step","step","0.1","min","0.1","max","999.9","inputmode","decimal","placeholder","0.5",1,"form-control",3,"input"],["id","step-help",1,"text-muted","d-block","mt-1"],["id","step-error","class","text-danger mt-1",4,"ngIf"],[1,"form-label","fw-600","mb-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-500"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","status_switch",1,"form-check-input",2,"transform","scale(1.5)",3,"change","checked"],[1,"d-flex","justify-content-end","gap-2","mt-4","flex-column","flex-sm-row"],["type","button",1,"btn","btn-secondary","w-100","w-sm-auto",3,"click","disabled"],["type","submit",1,"btn","btn-primary","w-100","w-sm-auto",3,"disabled"],["class","spinner-border spinner-border-sm me-1","role","status","aria-hidden","true",4,"ngIf"],["id","name-error",1,"text-danger","mt-1"],["id","text-error",1,"text-danger","mt-1"],["id","step-error",1,"text-danger","mt-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,e){if(n&1&&(o(0,"form",0),v("ngSubmit",function(){return e.onSubmit()}),o(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),a(5),p(6,"translate"),o(7,"span",5),a(8,"*"),r()(),P(9,"input",6),o(10,"small",7),a(11," \xD6rn: Adet, Metre "),r(),_(12,N,2,1,"small",8),r()(),o(13,"div",2)(14,"div",3)(15,"label",9),a(16),p(17,"translate"),o(18,"span",5),a(19,"*"),r()(),P(20,"input",10),o(21,"small",11),a(22," \xD6rn: ad, m, kg "),r(),_(23,$,2,1,"small",12),r()(),o(24,"div",2)(25,"div",3)(26,"label",13),a(27),p(28,"translate"),o(29,"span",5),a(30,"*"),r()(),o(31,"input",14),v("input",function(f){return e.onStepInput(f)}),r(),o(32,"small",15),a(33," Maksimum 1 ondal\u0131k basamak. \xD6rn: 0.5, 2.5, 10.1 "),r(),_(34,R,2,1,"small",16),r()(),o(35,"div",2)(36,"div",3)(37,"label",17),a(38),p(39,"translate"),r(),o(40,"div",18)(41,"span",19),a(42),r(),o(43,"div",20)(44,"input",21),v("change",function(f){let b;return(b=e.unitsForm.get("is_active"))==null?null:b.setValue(f.target.checked)}),r()()()()()(),o(45,"div",22)(46,"button",23),v("click",function(){return e.onCancel()}),a(47),p(48,"translate"),r(),o(49,"button",24),_(50,H,1,0,"span",25),a(51),p(52,"translate"),r()()()),n&2){let c,f,b,k;d("formGroup",e.unitsForm),i(5),l(" ",g(6,32,"Ad")," "),i(4),M("is-invalid",e.isFieldInvalid("name")),C("aria-invalid",e.isFieldInvalid("name"))("aria-describedby",e.isFieldInvalid("name")?"name-error":"name-help"),i(3),d("ngIf",e.isFieldInvalid("name")),i(4),l(" ",g(17,34,"K\u0131sa Metin")," "),i(4),M("is-invalid",e.isFieldInvalid("text")),C("aria-invalid",e.isFieldInvalid("text"))("aria-describedby",e.isFieldInvalid("text")?"text-error":"text-help"),i(3),d("ngIf",e.isFieldInvalid("text")),i(4),l(" ",g(28,36,"Ad\u0131m (Step)")," "),i(4),M("is-invalid",e.isFieldInvalid("step")),C("aria-invalid",e.isFieldInvalid("step"))("aria-describedby",e.isFieldInvalid("step")?"step-error":"step-help"),i(3),d("ngIf",e.isFieldInvalid("step")),i(4),l(" ",g(39,38,"Durum")," "),i(3),M("text-success",(c=e.unitsForm.get("is_active"))==null?null:c.value)("text-muted",!((f=e.unitsForm.get("is_active"))!=null&&f.value)),i(),l(" ",(b=e.unitsForm.get("is_active"))!=null&&b.value?"Aktif":"Pasif"," "),i(2),d("checked",(k=e.unitsForm.get("is_active"))==null?null:k.value),i(2),d("disabled",e.loading),i(),l(" ",g(48,40,"\u0130ptal")," "),i(2),d("disabled",e.loading),C("title",e.loading?"Kaydediliyor\u2026":""),i(),d("ngIf",e.loading),i(),l(" ",e.loading?"Kaydediliyor...":g(52,42,"Kaydet")," ")}},dependencies:[I,y,q,T,S,V,E,D,K,U,A,B,z,L,G],styles:[`.form-label[_ngcontent-%COMP%]{font-weight:600;color:#495057;margin-bottom:.5rem}.form-label.required[_ngcontent-%COMP%]:after{content:" *";color:#dc3545}.form-control[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.375rem;padding:.75rem;font-size:.875rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control[_ngcontent-%COMP%]:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem #0d6efd40}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354540}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:.75rem;color:#dc3545}.form-check[_ngcontent-%COMP%]{padding-left:0}.form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{margin-left:0;margin-right:.5rem}.form-check[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{font-weight:500;color:#495057}.form-label.fw-600[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#ef44441f}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#ef444440;box-shadow:0 0 0 .25rem #ef44441a}.form-text[_ngcontent-%COMP%]{margin-top:.25rem;font-size:.75rem;color:#64748b}.text-danger[_ngcontent-%COMP%]{color:#ef4444!important}.badge.bg-light[_ngcontent-%COMP%]{background-color:#f8f9fa!important;color:#495057!important}.badge.bg-light.fw-600[_ngcontent-%COMP%]{font-weight:600}.form-check.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:2em;margin-left:-2.5em;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba%2855, 63, 71, 0.75%29'/%3e%3c/svg%3e");background-position:left center;border-radius:2em;transition:background-position .15s ease-in-out}.form-check.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:var(--bs-primary);border-color:var(--bs-primary);background-position:right center;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba%28255, 255, 255, 1.0%29'/%3e%3c/svg%3e")}.form-check.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:focus{border-color:var(--bs-primary);outline:0;box-shadow:0 0 0 .25rem rgba(var(--bs-primary-rgb),.25)}.sticky-bottom[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:10;margin-left:-1rem;margin-right:-1rem;margin-bottom:-1rem}@media (min-width: 1200px){.sticky-bottom[_ngcontent-%COMP%]{margin-left:-1.5rem;margin-right:-1.5rem;margin-bottom:-1.5rem}}@media (max-width: 991.98px){.row.g-4[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]:first-child{margin-bottom:1rem}}.spinner-border-sm[_ngcontent-%COMP%]{width:.875rem;height:.875rem}.step-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .step-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.step-input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.units-form[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:0 6px 24px #0206170f}.units-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#334155}.units-form[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{color:#64748b!important}.units-form[_ngcontent-%COMP%]   .bg-success-subtle[_ngcontent-%COMP%]{background:#e8f7ee!important}.units-form[_ngcontent-%COMP%]   .bg-danger-subtle[_ngcontent-%COMP%]{background:#fee2e2!important}.units-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .units-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.units-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.units-form[_ngcontent-%COMP%]   .status-switch-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:1px solid #dee2e6!important;transition:all .3s ease}.units-form[_ngcontent-%COMP%]   .status-switch-container[_ngcontent-%COMP%]:hover{border-color:#adb5bd!important;box-shadow:0 2px 8px #00000014}.units-form[_ngcontent-%COMP%]   .status-switch-container[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]{flex:1}.units-form[_ngcontent-%COMP%]   .status-switch-container[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.95rem;transition:color .3s ease}.units-form[_ngcontent-%COMP%]   .status-switch-container[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;line-height:1.3}.units-form[_ngcontent-%COMP%]   .status-switch-container[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:3rem;height:1.5rem;border:2px solid #dee2e6;background-color:#fff;transition:all .3s ease}.units-form[_ngcontent-%COMP%]   .status-switch-container[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:#198754;border-color:#198754;box-shadow:0 0 0 .2rem #19875440}.units-form[_ngcontent-%COMP%]   .status-switch-container[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #19875440}.units-form[_ngcontent-%COMP%]   .status-switch-container[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:not(:checked){background-color:#6c757d;border-color:#6c757d}.units-form[_ngcontent-%COMP%]   .status-switch-container[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:not(:checked):focus{box-shadow:0 0 0 .2rem #6c757d40}`]});let s=m;return s})();export{st as a};

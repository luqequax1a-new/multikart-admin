import{a as fe,b as ge,c as he,d as _e}from"./chunk-OZNJGL5F.js";import{b as ye,c as Ce,d as ve,h as B}from"./chunk-PSKPVLWQ.js";import{a as ue}from"./chunk-DRWHSBYU.js";import{a as ce}from"./chunk-LCVX2N4P.js";import{a as de}from"./chunk-Y2Z4WWCH.js";import{a as pe}from"./chunk-MLWMDQKS.js";import{B as ne,C as ae,D as le,c as K,d as Q,e as X,g as Y,h as Z,k as c,l as ee,m as te,p as ie,q as oe,qa as k,t as re}from"./chunk-IKKQDHIF.js";import{e as H,g as J}from"./chunk-OTODDIHK.js";import{c as se,d as me}from"./chunk-AWERIOQH.js";import{Ac as P,Ad as $,Bc as y,Ed as z,Fc as G,Gc as R,Ib as M,Ja as q,Kb as x,Lc as s,Mc as m,Pb as o,Qb as r,Rb as n,Sb as d,Y as V,Yc as U,Z as I,_b as W,bb as i,bc as _,dc as C,g as A,ja as f,n as T,ob as D,od as L,qa as w,ra as b,rc as v,sc as O,t as N,tc as E,td as j,yc as S,zc as F}from"./chunk-KIZZVTEV.js";var we=()=>({standalone:!0}),be=a=>[a];function Me(a,p){a&1&&(r(0,"div",3),v(1),s(2,"translate"),n()),a&2&&(i(),O(m(2,1,"title_is_required")))}function xe(a,p){if(a&1){let g=W();d(0,"ngx-editor-menu",24),r(1,"ngx-editor",25),P("ngModelChange",function(l){w(g);let t=C();return F(t.html,l)||(t.html=l),b(l)}),_("ngModelChange",function(l){w(g);let t=C();return b(t.getData(l))}),n()}if(a&2){let g=C();o("editor",g.editor),i(),o("editor",g.editor)("placeholder","Type here..."),S("ngModel",g.html)}}var $e=(()=>{let p=class p{constructor(){this.store=f(k),this.route=f(H),this.router=f(J),this.formBuilder=f(ne),this.type=U(void 0),this.page$=f(k).select(B.selectedPage),this.destroy$=new A,this.html="",this.mediaConfig=ce,this.isCodeEditor=!0,this.textArea=new c("");let e=f(q);this.isBrowser=z(e),this.form=this.formBuilder.group({title:new c("",[X.required]),content:new c,meta_title:new c,meta_description:new c,page_meta_image_id:new c,status:new c(1)})}ngOnInit(){this.route.params.pipe(V(e=>e.id?this.store.dispatch(new Ce(e.id)).pipe(N(()=>this.store.select(B.selectedPage))):T()),I(this.destroy$)).subscribe(e=>{this.id=e?.id,this.form.patchValue({title:e?.title,content:e?.content,meta_title:e?.meta_title,meta_description:e?.meta_description,status:e?.status})}),this.isBrowser&&(this.editor=new _e)}selectMetaImage(e){Array.isArray(e)||this.form.controls.page_meta_image_id.setValue(e?e.id:null)}getText(e){this.form.controls.content.setValue(this.textArea.value)}getData(e){this.textArea.setValue(this.html)}submit(){this.form.markAllAsTouched();let e=new ye(this.form.value);this.type()=="edit"&&this.id&&(e=new ve(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/page")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};p.\u0275fac=function(l){return new(l||p)},p.\u0275cmp=D({type:p,selectors:[["app-form-page"]],inputs:{type:[1,"type"]},decls:39,vars:57,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],[1,"invalid-feedback"],[1,"custom-editor","editor-checkbox"],[1,"form-check","form-switch"],["id","ckcheck","type","checkbox","name","isCodeEditor",1,"form-check-input",3,"ngModelChange","ngModel","ngModelOptions"],["for","ckcheck",1,"cursor-pointer"],[1,"edit"],[1,"ri-edit-box-line"],[1,"code"],[1,"ri-code-s-slash-line"],[3,"ngClass"],[1,"editor-textarea",3,"ngClass"],["id","content","rows","3",1,"form-control",3,"keyup","placeholder","formControl"],[1,"mt-2"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"selectedFiles","accept","multipleImage","image"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[3,"editor"],["formControlName","content",3,"ngModelChange","editor","placeholder","ngModel"]],template:function(l,t){if(l&1&&(r(0,"form",0),_("ngSubmit",function(){return t.submit()}),r(1,"app-form-fields",1),d(2,"input",2),s(3,"translate"),M(4,Me,3,3,"div",3),n(),r(5,"app-form-fields",1)(6,"div",4)(7,"div",5)(8,"input",6),P("ngModelChange",function(u){return F(t.isCodeEditor,u)||(t.isCodeEditor=u),u}),n(),r(9,"label",7)(10,"span",8),d(11,"i",9),n(),r(12,"span",10),d(13,"i",11),n()()(),r(14,"div",12),M(15,xe,2,4),n(),r(16,"div",13)(17,"textarea",14),s(18,"translate"),_("keyup",function(u){return t.getText(u)}),n(),r(19,"p",15),v(20),s(21,"translate"),n()()()(),r(22,"app-form-fields",1),d(23,"input",16),s(24,"translate"),n(),r(25,"app-form-fields",1),d(26,"textarea",17),s(27,"translate"),n(),r(28,"app-form-fields",1)(29,"app-image-upload",18),s(30,"async"),_("selectedFiles",function(u){return t.selectMetaImage(u)}),n()(),r(31,"app-form-fields",1)(32,"div",19)(33,"label",20),d(34,"input",21)(35,"span",22),n()()(),r(36,"app-button",23),v(37),s(38,"translate"),n()()),l&2){let h;o("formGroup",t.form),i(),o("label","title")("for","title")("required",!0),i(),o("placeholder",y(m(3,40,"enter_title"))),i(2),x(t.form.controls.title.touched&&(t.form.controls.title.errors!=null&&t.form.controls.title.errors.required)?4:-1),i(),o("label","content")("for","content")("required",!1),i(3),S("ngModel",t.isCodeEditor),o("ngModelOptions",G(54,we)),i(6),o("ngClass",t.isCodeEditor?"d-block":"d-none"),i(),x(t.isBrowser?15:-1),i(),o("ngClass",t.isCodeEditor?"d-none":"d-block"),i(),o("placeholder",y(m(18,42,"enter_html_content")))("formControl",t.textArea),i(3),E("*",m(21,44,"only_accept_html_tags")),i(2),o("label","meta_title")("for","metatitle")("required",!1),i(),o("placeholder",y(m(24,46,"enter_meta_title"))),i(2),o("label","meta_description")("for","desc")("required",!1),i(),o("placeholder",y(m(27,48,"enter_meta_description"))),i(2),o("label","meta_image")("for","meta_image")("required",!1),i(),o("accept",R(55,be,t.mediaConfig.image))("multipleImage",!1)("image",(h=m(30,50,t.page$))==null?null:h.page_meta_image),i(2),o("label","status")("for","status")("required",!1),i(5),o("id","page_btn"),i(),E(" ",m(38,52,t.type()==="create"?"save_page":"update_page")," ")}},dependencies:[me,ae,te,Q,K,Y,Z,ee,le,ie,oe,re,he,fe,ge,$,L,de,ue,pe,se,j],encapsulation:2});let a=p;return a})();export{$e as a};

import{a as B,b as ne,c as ae,d as re,e as oe}from"./chunk-ZEKTOLSH.js";import{a as se}from"./chunk-GJUMWKSA.js";import"./chunk-6TS3CAIM.js";import"./chunk-2MGWSW7E.js";import"./chunk-YJGMUJNE.js";import"./chunk-HD5XXWEJ.js";import"./chunk-HJPVTB2W.js";import{a as ie}from"./chunk-MLWMDQKS.js";import{a as te}from"./chunk-MPC4A6Z2.js";import"./chunk-Q3XL2YFP.js";import"./chunk-5DTRVH74.js";import"./chunk-GG7AHMIJ.js";import{C as Y,D as Z,U as R,V as ee,d as H,e as W,g as z,k as J,p as X,qa as g}from"./chunk-IKKQDHIF.js";import{e as U,g as G}from"./chunk-OTODDIHK.js";import"./chunk-EY6JDCC6.js";import{c as q,d as Q}from"./chunk-AWERIOQH.js";import{Ad as L,Bc as j,Lc as l,Mc as d,Pb as h,Pc as K,Qb as a,Rb as r,Sb as v,Zc as V,_b as y,bb as s,bc as f,dc as P,gb as $,ja as p,kc as S,lc as x,ob as M,oc as k,qa as m,qc as T,ra as u,rc as o,sc as w,tc as E,ub as N,va as O}from"./chunk-KIZZVTEV.js";import{a as C,b as F,d as I}from"./chunk-4CLCTAJ7.js";var pe=["answersModal"];function me(c,n){if(c&1){let _=y();a(0,"div",1)(1,"h3",2),o(2),l(3,"translate"),r(),a(4,"app-button",3),f("click",function(){let t=m(_).$implicit;return u(t.dismiss("Cross click"))}),v(5,"i",4),r()(),a(6,"div",5)(7,"div",6)(8,"table",7)(9,"tbody")(10,"tr")(11,"td",8),o(12),l(13,"translate"),r(),a(14,"td",9),o(15),r()(),a(16,"tr")(17,"td",8),o(18),l(19,"translate"),r(),a(20,"td",9),v(21,"textarea",10),l(22,"translate"),r()()()()(),a(23,"div")(24,"div",11)(25,"app-button",12),f("click",function(){let t=m(_).$implicit;return u(t.dismiss("cancel"))}),o(26),l(27,"translate"),r(),a(28,"app-button",12),f("click",function(){m(_);let t=P();return u(t.submit())}),o(29),l(30,"translate"),r()()()()}if(c&2){let _=P();s(2),w(d(3,19,"answers")),s(2),T("btn btn-close"),h("spinner",!1)("id","payout_close_btn"),s(8),w(d(13,21,"question")),s(3),w(_.qna==null?null:_.qna.question),s(3),w(d(19,23,"answers")),s(3),h("placeholder",j(d(22,25,"enter_answers")))("formControl",_.answers),s(4),T("btn-md fw-bold btn btn-secondary"),h("id","close_answers_modal_btn"),s(),E(" ",d(27,27,"close")," "),s(2),T("btn-theme btn-md fw-bold btn"),h("id","submit_answers_btn"),s(),E(" ",d(30,29,"submit")," ")}}var le=(()=>{let n=class n{constructor(){this.modalService=p(ee),this.store=p(g),this.modalOpen=!1,this.answers=new J("",[W.required]),this.AnswersModal=V("answersModal")}openModal(e){return I(this,null,function*(){this.modalOpen=!0,this.qna=e,e.answer?this.answers.patchValue(e.answer):this.answers.patchValue(""),this.modalService.open(this.AnswersModal(),{ariaLabelledBy:"Payout-Modal",centered:!0,windowClass:"theme-modal text-center"}).result.then(t=>{`${t}`,this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})})}getDismissReason(e){return e===R.ESC?"by pressing ESC":e===R.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}submit(){if(this.answers.markAllAsTouched(),this.answers.valid){let e={question:this.qna.question,answer:this.answers.value,product_id:this.qna.product_id};this.store.dispatch(new ne(e,this.qna.id)).subscribe({complete:()=>{this.modalService.dismissAll()}})}}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=M({type:n,selectors:[["app-answers-modal"]],viewQuery:function(t,i){t&1&&S(i.AnswersModal,pe,5),t&2&&x()},decls:2,vars:0,consts:[["answersModal",""],[1,"modal-header"],[1,"mb-1","fw-semibold"],[3,"click","spinner","id"],[1,"ri-close-line"],[1,"modal-body","qa-modal"],[1,"border","rounded-3","mb-4","dark-border-color"],[1,"table","all-package","theme-table","no-footer"],[1,"text-start","fw-semibold"],[1,"text-start"],[1,"form-control",3,"placeholder","formControl"],[1,"button-box"],[3,"click","id"]],template:function(t,i){t&1&&N(0,me,31,31,"ng-template",null,0,K)},dependencies:[Q,Y,H,z,Z,X,ie,q],encapsulation:2});let c=n;return c})();var ue=["answersModal"],Be=(()=>{let n=class n{constructor(){this.store=p(g),this.renderer=p($),this.router=p(G),this.activatedRoute=p(U),this.document=p(O),this.questionAnswers$=p(g).select(oe.questionAnswers),this.AnswersModal=V("answersModal"),this.filter={},this.tableConfig={columns:[{title:"Question",dataField:"question"},{title:"product",dataField:"product_name"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"store.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"store.destroy"}],data:[],total:0}}ngOnInit(){this.questionAnswers$.subscribe(e=>{this.total=e.total;let t=e.data.filter(i=>(i.product_name=i?.product?.name,i.status=i?.answer?'<div class="status-approved"><span>Repelled</span></div>':'<div class="status-pending"><span>Pending</span></div>',i));this.tableConfig.data=t||[],this.tableConfig.total=e&&e?.total?e?.total:0}),this.activatedRoute.queryParams.subscribe(e=>{this.filter=F(C({},this.filter),{status:e.status?e.status:""}),this.selectedStatus=e.status,this.store.dispatch(new B(this.filter))})}onTableChange(e){let t=this.selectedStatus?this.selectedStatus:"";this.filter=C(C({},this.filter),e),this.filter.status=t,this.store.dispatch(new B(this.filter))}onActionClicked(e){e.actionToPerform=="edit"?this.AnswersModal().openModal(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"&&this.deleteAll(e.data)}filterOrder(e){this.renderer.addClass(this.document.body,"loader-none"),this.router.navigate([],{queryParams:{status:e||null},queryParamsHandling:"merge"})}delete(e){this.store.dispatch(new ae(e.id))}deleteAll(e){this.store.dispatch(new re(e))}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=M({type:n,selectors:[["app-questions-answers"]],viewQuery:function(t,i){t&1&&S(i.AnswersModal,ue,5),t&2&&x()},decls:18,vars:19,consts:[["answersModal",""],[3,"gridClass","title"],[3,"tableChanged","action","tableConfig","hasCheckbox"],["advanceFilter","",1,"show-box","mb-4","d-block"],[1,"order-tab-content"],["href","javascript:void(0)",3,"click"]],template:function(t,i){if(t&1){let b=y();a(0,"app-page-wrapper",1)(1,"app-table",2),f("tableChanged",function(D){return m(b),u(i.onTableChange(D))})("action",function(D){return m(b),u(i.onActionClicked(D))}),a(2,"div",3)(3,"ul",4)(4,"li")(5,"a",5),f("click",function(){return m(b),u(i.filterOrder(""))}),o(6),l(7,"translate"),r()(),a(8,"li")(9,"a",5),f("click",function(){return m(b),u(i.filterOrder("pending"))}),o(10),l(11,"translate"),r()(),a(12,"li")(13,"a",5),f("click",function(){return m(b),u(i.filterOrder("answered"))}),o(14),l(15,"translate"),r()()()()()(),v(16,"app-answers-modal",null,0)}t&2&&(h("gridClass","col-sm-12")("title","Q&A"),s(),h("tableConfig",i.tableConfig)("hasCheckbox",!0),s(3),k("active",!i.selectedStatus),s(2),w(d(7,13,"all")),s(2),k("active",i.selectedStatus==="pending"?"active":""),s(2),w(d(11,15,"pending")),s(2),k("active",i.selectedStatus==="answered"?"active":""),s(2),w(d(15,17,"answered")))},dependencies:[te,se,le,L,Q,q],encapsulation:2});let c=n;return c})();export{Be as QuestionsAnswers};

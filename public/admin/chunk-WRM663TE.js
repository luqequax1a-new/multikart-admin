import{a as T}from"./chunk-D5EBKP3W.js";import{a as P,b as V,c as R}from"./chunk-QSO45A42.js";import{a as M}from"./chunk-GJUMWKSA.js";import"./chunk-6TS3CAIM.js";import"./chunk-2MGWSW7E.js";import"./chunk-YJGMUJNE.js";import"./chunk-3ARB4UI6.js";import"./chunk-HD5XXWEJ.js";import"./chunk-HJPVTB2W.js";import"./chunk-MLWMDQKS.js";import{a as v}from"./chunk-MPC4A6Z2.js";import"./chunk-Q3XL2YFP.js";import"./chunk-5DTRVH74.js";import"./chunk-GG7AHMIJ.js";import{qa as _}from"./chunk-IKKQDHIF.js";import"./chunk-OTODDIHK.js";import"./chunk-EY6JDCC6.js";import"./chunk-AWERIOQH.js";import{Pb as s,Qb as c,Rb as f,Zc as C,_b as g,bb as u,bc as m,ja as p,kc as h,lc as w,ob as y,qa as r,ra as n}from"./chunk-KIZZVTEV.js";import"./chunk-4CLCTAJ7.js";var A=["payoutModal"],G=(()=>{let i=class i{constructor(){this.store=p(_),this.refund$=p(_).select(R.refund),this.PayoutModal=C("payoutModal"),this.tableConfig={columns:[{title:"order_number",dataField:"order_id"},{title:"consumer_name",dataField:"consumer_name",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"refund_status"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"View",actionToPerform:"view",icon:"ri-eye-line"}],data:[],total:0}}ngOnInit(){this.refund$.subscribe(t=>{let a=t?.data?.filter(e=>(e.consumer_name=e?.user?.name,e.order_id=`<span class="fw-bolder">#${e?.order?.order_number}</span>`,e.refund_status=e.status?`<div class="status-${e.status}"><span>${e.status.replace(/_/g," ")}</span></div>`:"-",e));this.tableConfig.data=t?a:[],this.tableConfig.total=t?t?.total:0})}onActionClicked(t){t.actionToPerform=="view"&&this.PayoutModal().openModal(t.data)}onTableChange(t){this.store.dispatch(new P(t))}approved(t){this.store.dispatch(new V(t.data.id,t.status))}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=y({type:i,selectors:[["app-refund"]],viewQuery:function(a,e){a&1&&h(e.PayoutModal,A,5),a&2&&w()},decls:4,vars:5,consts:[["payoutModal",""],[3,"gridClass","title"],[3,"tableChanged","action","tableConfig"],[3,"payout","label","action"]],template:function(a,e){if(a&1){let l=g();c(0,"app-page-wrapper",1)(1,"app-table",2),m("tableChanged",function(o){return r(l),n(e.onTableChange(o))})("action",function(o){return r(l),n(e.onActionClicked(o))}),f()(),c(2,"app-payout-modal",3,0),m("payout",function(o){return r(l),n(e.approved(o))}),f()}a&2&&(s("gridClass","col-sm-12")("title","refund"),u(),s("tableConfig",e.tableConfig),u(),s("label","refund")("action",!1))},dependencies:[v,M,T],encapsulation:2});let d=i;return d})();export{G as Refund};

import{a as x,e as L,f as R,g as B,h as E}from"./chunk-PSKPVLWQ.js";import{a as M}from"./chunk-GJUMWKSA.js";import"./chunk-6TS3CAIM.js";import"./chunk-2MGWSW7E.js";import{d as F}from"./chunk-YJGMUJNE.js";import{a as $}from"./chunk-3ARB4UI6.js";import"./chunk-HD5XXWEJ.js";import"./chunk-HJPVTB2W.js";import"./chunk-MLWMDQKS.js";import{a as I}from"./chunk-MPC4A6Z2.js";import"./chunk-Q3XL2YFP.js";import"./chunk-5DTRVH74.js";import"./chunk-GG7AHMIJ.js";import{qa as p}from"./chunk-IKKQDHIF.js";import{g as y,h as A,l as k}from"./chunk-OTODDIHK.js";import"./chunk-EY6JDCC6.js";import{c as S,d as D}from"./chunk-AWERIOQH.js";import{Ed as v,Fc as C,Ja as f,Lc as w,Mc as T,Pb as n,Qb as d,Rb as c,Sb as h,bb as o,bc as b,ja as a,ob as u,rc as _,tc as P,ub as g}from"./chunk-KIZZVTEV.js";import"./chunk-4CLCTAJ7.js";var O=()=>["/page/create"];function U(i,t){i&1&&(d(0,"div",3)(1,"a",4),h(2,"i",5),_(3),w(4,"translate"),c()()),i&2&&(o(),n("routerLink",C(4,O)),o(2),P(" ",T(4,2,"add_page")," "))}var te=(()=>{let t=class t{constructor(){this.store=a(p),this.router=a(y),this.platformId=a(f),this.page$=a(p).select(E.page),this.setting$=a(p).select(F.setting),this.tableConfig={columns:[{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"page.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"page.destroy"},{label:"View",actionToPerform:"view",icon:"ri-eye-line"}],data:[],total:0},this.setting$.subscribe(e=>{e&&e.general&&(this.url=e.general.site_url)})}ngOnInit(){this.page$.subscribe(e=>{this.tableConfig.data=e?e?.data:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new x(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="status"?this.status(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"?this.deleteAll(e.data):e.actionToPerform=="view"&&this.view(e.data)}edit(e){this.router.navigateByUrl(`/page/edit/${e.id}`)}status(e){this.store.dispatch(new L(e.id,e.status))}delete(e){this.store.dispatch(new R(e.id))}deleteAll(e){this.store.dispatch(new B(e))}view(e){v(this.platformId)&&window.open(this.url+"/page/"+e.slug,"_blank")}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=u({type:t,selectors:[["app-page"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(s,l){s&1&&(d(0,"app-page-wrapper",0),g(1,U,5,5,"div",1),d(2,"app-table",2),b("tableChanged",function(r){return l.onTableChange(r)})("rowClicked",function(r){return l.edit(r)})("action",function(r){return l.onActionClicked(r)}),c()()),s&2&&(n("gridClass","col-sm-12")("title","pages"),o(),n("hasPermission","page.create"),o(),n("tableConfig",l.tableConfig)("hasCheckbox",!0))},dependencies:[D,k,A,$,I,M,S],encapsulation:2});let i=t;return i})();export{te as Page};

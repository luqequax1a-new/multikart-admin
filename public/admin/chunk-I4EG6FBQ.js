import{a as A,b as w,c as $,d as x,e as U,f as j,g as I,h as E,i as k,j as D,k as C,l as F}from"./chunk-VO736VT2.js";import{a as H}from"./chunk-GG7AHMIJ.js";import{Ia as v,qa as S,sa as c,ta as b,ua as m}from"./chunk-IKKQDHIF.js";import{c as P,d as _}from"./chunk-EY6JDCC6.js";import{$ as h,ea as g,ja as s,l as a,n as y}from"./chunk-KIZZVTEV.js";import{a as u,b as n}from"./chunk-4CLCTAJ7.js";var R=(()=>{let r=class r{constructor(){this.http=s(_),this.baseUrl=`${H.URL}/products`}list(t={}){let o=Object.entries(t).filter(([d,p])=>p!=null&&p!=="").reduce((d,[p,B])=>d.set(p,String(B)),new P);return this.http.get(`${this.baseUrl}`,{params:o})}getProducts(t){return y({data:[]})}updateStatus(t,o){return this.http.patch(`${this.baseUrl}/${t}/status`,{is_active:o})}create(t){return this.http.post(`${this.baseUrl}`,t)}update(t,o){return this.http.put(`${this.baseUrl}/${t}`,o)}show(t){return this.http.get(`${this.baseUrl}/${t}`)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}duplicate(t){return this.http.post(`${this.baseUrl}/${t}/duplicate`,{})}};r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let f=r;return f})();var l,i=(l=class{constructor(){this.store=s(S),this.notificationService=s(v),this.productService=s(R)}static product(r){return r.product}static products(r){return r.product.data.filter(e=>e.id!==r.selectedProduct?.id).map(e=>({label:e?.name,value:e?.id,data:{type:e.type,name:e.name,slug:e.slug,stock_status:e.stock_status,image:e.product_thumbnail?e.product_thumbnail.original_url:"assets/images/product.png"}}))}static digitalProducts(r){let e=[];return r.product.data.filter(t=>t.id!==r.selectedProduct?.id&&t.product_type=="digital").map(t=>{e.push({label:t?.name,value:t?.id,data:{name:t.name,product_id:t?.id,variation_id:null,image:t.product_thumbnail?t.product_thumbnail.original_url:"assets/images/product.png"}}),t?.variations?.length&&t.variations.map(o=>{e.push({label:o?.name,value:o?.id,data:{name:o.name,product_id:t?.id,variation_id:o?.id,image:o.variation_image?o.variation_image.original_url:"assets/images/product.png"}})})}),e}static selectedProduct(r){return r.selectedProduct}static topSellingProducts(r){return r.topSellingProducts}getProducts(r,e){return this.productService.list(e.payload).pipe(h({next:t=>{let o=Array.isArray(t)?t:t?.data??[],d;if(e.payload.page&&e.payload.paginate?d=o.map(p=>u({},p)).slice((e.payload.page-1)*e.payload.paginate,(e.payload.page-1)*e.payload.paginate+e.payload.paginate):d=o,e?.payload.top_selling){let p=r.getState();r.patchState(n(u({},p),{topSellingProducts:d}))}else r.patchState({product:{data:d,total:t?.meta?.total??t?.total??d?.length}})},error:t=>{throw new Error(t?.error?.message)}}))}create(r,e){}edit(r,{id:e}){return this.productService.getProducts().pipe(h({next:t=>{let o=r.getState(),d=t.data.find(p=>p.id==e);r.patchState(n(u({},o),{selectedProduct:d}))},error:t=>{throw new Error(t?.error?.message)}}))}update(r,{payload:e,id:t}){}updateStatus(r,{id:e,status:t}){return this.productService.updateStatus(e,t).pipe(h({next:()=>{let o=r.getState(),d=o.product.data.map(p=>p.id===e?n(u({},p),{is_active:t}):p);r.patchState(n(u({},o),{product:n(u({},o.product),{data:d})})),this.notificationService.showSuccess("\xDCr\xFCn durumu ba\u015Far\u0131yla g\xFCncellendi")},error:o=>{throw this.notificationService.showError("\xDCr\xFCn durumu g\xFCncellenirken hata olu\u015Ftu"),new Error(o?.error?.message)}}))}approveStatus(r,{id:e,status:t}){}delete(r,{id:e}){}deleteAll(r,{ids:e}){}replicateProduct(r,{ids:e}){}import(r,e){}export(r,e){}download(r,e){}},l.\u0275fac=function(e){return new(e||l)},l.\u0275prov=g({token:l,factory:l.\u0275fac}),l);a([c(A)],i.prototype,"getProducts",null);a([c(w)],i.prototype,"create",null);a([c($)],i.prototype,"edit",null);a([c(x)],i.prototype,"update",null);a([c(U)],i.prototype,"updateStatus",null);a([c(j)],i.prototype,"approveStatus",null);a([c(I)],i.prototype,"delete",null);a([c(E)],i.prototype,"deleteAll",null);a([c(k)],i.prototype,"replicateProduct",null);a([c(D)],i.prototype,"import",null);a([c(C)],i.prototype,"export",null);a([c(F)],i.prototype,"download",null);a([m()],i,"product",null);a([m()],i,"products",null);a([m()],i,"digitalProducts",null);a([m()],i,"selectedProduct",null);a([m()],i,"topSellingProducts",null);i=a([b({name:"product",defaults:{product:{data:[],total:0},selectedProduct:null,topSellingProducts:[]}})],i);export{R as a,i as b};

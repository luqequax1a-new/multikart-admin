import{a as je}from"./chunk-RSBT43UQ.js";import{b as J}from"./chunk-SPPECMGV.js";import{a as Re}from"./chunk-DRWHSBYU.js";import{a as qe}from"./chunk-LCVX2N4P.js";import{a as Oe}from"./chunk-M3HD75V3.js";import{a as Pe}from"./chunk-Y2Z4WWCH.js";import{a as $e}from"./chunk-EGIXQ7ZE.js";import{a as Fe,b as Ee,c as Ie,d as Be,e as ke,g as Ae}from"./chunk-7RQBIUSJ.js";import{a as z}from"./chunk-3ARB4UI6.js";import{a as Ve}from"./chunk-HD5XXWEJ.js";import{a as Ke}from"./chunk-MLWMDQKS.js";import{a as W}from"./chunk-MPC4A6Z2.js";import{B as be,C as G,D as H,O as we,P as Se,Q as Me,R as xe,S as De,c as me,d as L,e as ue,fa as Ne,g as Q,h as ye,k as v,m as ge,n as fe,p as _e,q as he,qa as K,t as ve,x as Ce,y as Te}from"./chunk-IKKQDHIF.js";import{e as U,g as V,h as de,l as ce}from"./chunk-OTODDIHK.js";import{c as F,d as E}from"./chunk-AWERIOQH.js";import{Ad as se,Bc as N,Ca as A,Fc as ae,Gc as k,Hc as le,Ib as g,Kb as f,Lc as d,Mc as c,Nb as P,Ob as q,Pb as l,Qb as a,Rb as p,Sb as m,Y as re,Yc as u,Z as ne,Zc as j,_b as D,bb as o,bc as _,dc as y,g as te,ja as C,kc as O,lc as R,n as ie,ob as x,oc as Y,qa as S,qc as $,ra as M,rc as h,sc as b,t as oe,tc as B,td as pe,ub as I}from"./chunk-KIZZVTEV.js";var X=e=>[e],We=()=>[];function ze(e,r){e&1&&(a(0,"div",4),h(1),d(2,"translate"),p()),e&2&&(o(),b(c(2,1,"name_is_required")))}function Je(e,r){e&1&&(a(0,"app-form-fields",2),d(1,"translate"),a(2,"div",16),m(3,"input",17),d(4,"translate"),a(5,"span",18),h(6,"%"),p()(),a(7,"p",19),h(8),p()()),e&2&&(l("label",c(1,6,"commission_rate"))("for","commission_rate")("required",!1),o(3),l("placeholder",N(c(4,8,"enter_default_commission_rate"))),o(5),b("*Define the percentage of earnings retained as commission."))}var Le=(()=>{let r=class r{constructor(){this.store=C(K),this.route=C(U),this.router=C(V),this.formBuilder=C(be),this.type=u(void 0),this.categories=u(void 0),this.categoryType=u("product"),this.mediaConfig=qe,this.destroy$=new te,this.form=this.formBuilder.group({name:new v("",[ue.required]),description:new v,parent_id:new v,type:new v(this.categoryType(),[]),commission_rate:new v,category_image_id:new v,category_icon_id:new v,category_meta_image_id:new v,meta_title:new v,meta_description:new v,status:new v(!0)})}ngOnChanges(){this.form.controls.type.setValue(this.categoryType())}ngOnInit(){this.route.params.pipe(re(t=>t.id?this.store.dispatch(new Ie(t.id)).pipe(oe(()=>this.store.select(J.selectedCategory))):ie()),ne(this.destroy$)).subscribe(t=>{this.category=t,this.form.patchValue({name:this.category?.name,description:this.category?.description,parent_id:this.category?.parent_id,type:this.category?.type,commission_rate:this.category?.commission_rate,category_image_id:this.category?.category_image_id,category_icon_id:this.category?.category_icon_id,category_meta_image_id:this.category?.category_meta_image_id,meta_title:this.category?.meta_title,meta_description:this.category?.meta_description,status:this.category?.status})})}selectItem(t){Array.isArray(t)&&t.length?this.form.controls.parent_id.setValue(t[0]):this.form.controls.parent_id.setValue("")}selectCategoryImage(t){Array.isArray(t)||this.form.controls.category_image_id.setValue(t?t.id:"")}selectCategoryIcon(t){Array.isArray(t)||this.form.controls.category_icon_id.setValue(t?t.id:"")}selectMetaImage(t){Array.isArray(t)||this.form.controls.category_meta_image_id.setValue(t?t.id:"")}submit(){this.form.markAllAsTouched();let t=new Ee(this.form.value);this.type()=="edit"&&this.category?.id&&(t=new Be(this.form.value,this.category.id)),this.form.valid&&this.store.dispatch(t).subscribe({complete:()=>{this.type()=="create"?(this.form.reset(),this.form.controls.category_image_id.setValue(""),this.form.controls.category_icon_id.setValue(""),this.form.controls.status.setValue(!0)):this.form.value.type==="product"?this.router.navigateByUrl("/category"):this.router.navigateByUrl("/blog/category")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=x({type:r,selectors:[["app-form-category"]],inputs:{type:[1,"type"],categories:[1,"categories"],categoryType:[1,"categoryType"]},features:[A],decls:39,vars:88,consts:[[3,"gridClass","title"],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","formControlName","name",1,"form-control",3,"placeholder"],[1,"invalid-feedback"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[3,"selectedItem","selectSingle","selectedOption","options","subArrayKey"],[3,"selectedFiles","multipleImage","accept","image"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"selectedFiles","accept","multipleImage","image"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"input-group"],["id","commission_rate","type","number","min","0","max","100","oninput","if (value > 100) value = 100; if (value < 0) value = 0;","formControlName","commission_rate","numbersOnly","",1,"form-control",3,"placeholder"],[1,"input-group-text"],[1,"help-text"]],template:function(n,i){n&1&&(a(0,"app-page-wrapper",0)(1,"form",1),_("ngSubmit",function(){return i.submit()}),a(2,"app-form-fields",2),d(3,"translate"),m(4,"input",3),d(5,"translate"),g(6,ze,3,3,"div",4),p(),a(7,"app-form-fields",2),d(8,"translate"),m(9,"textarea",5),d(10,"translate"),p(),g(11,Je,9,10,"app-form-fields",2),a(12,"app-form-fields",2),d(13,"translate"),a(14,"app-advance-dropdown",6),_("selectedItem",function(w){return i.selectItem(w)}),p()(),a(15,"app-form-fields",2),d(16,"translate"),a(17,"app-image-upload",7),_("selectedFiles",function(w){return i.selectCategoryImage(w)}),p()(),a(18,"app-form-fields",2),d(19,"translate"),a(20,"app-image-upload",7),_("selectedFiles",function(w){return i.selectCategoryIcon(w)}),p()(),a(21,"app-form-fields",2),m(22,"input",8),d(23,"translate"),p(),a(24,"app-form-fields",2),m(25,"textarea",9),d(26,"translate"),p(),a(27,"app-form-fields",2),d(28,"translate"),a(29,"app-image-upload",10),_("selectedFiles",function(w){return i.selectMetaImage(w)}),p()(),a(30,"app-form-fields",2),d(31,"translate"),a(32,"div",11)(33,"label",12),m(34,"input",13)(35,"span",14),p()()(),a(36,"app-button",15),h(37),d(38,"translate"),p()()()),n&2&&(l("gridClass","col-sm-12")("title",i.type()+"_category"),o(),l("formGroup",i.form),o(),l("label",c(3,55,"name"))("for","name")("required",!0),o(2),l("placeholder",N(c(5,57,"enter_name"))),o(2),f(i.form.controls.name.touched&&(i.form.controls.name.errors!=null&&i.form.controls.name.errors.required)?6:-1),o(),l("label",c(8,59,"description"))("for","description")("required",!1),o(2),l("placeholder",N(c(10,61,"enter_description"))),o(2),f(i.categoryType()==="product"?11:-1),o(),l("label",c(13,63,"select_parent"))("for","category")("required",!1),o(2),l("selectSingle",!0)("selectedOption",i.category&&i.category.parent_id?k(79,X,i.category.parent_id):ae(81,We))("options",i.categories())("subArrayKey","subcategories"),o(),l("label",c(16,65,"image"))("for","image")("required",!1),o(2),l("multipleImage",!1)("accept",k(82,X,i.mediaConfig.image))("image",i.category==null?null:i.category.category_image),o(),l("label",c(19,67,"icon"))("for","icon")("required",!1),o(2),l("multipleImage",!1)("accept",k(84,X,i.mediaConfig.image))("image",i.category==null?null:i.category.category_icon),o(),l("label","meta_title")("for","metatitle")("required",!1),o(),l("placeholder",N(c(23,69,"enter_meta_title"))),o(2),l("label","meta_description")("for","desc")("required",!1),o(),l("placeholder",N(c(26,71,"enter_meta_description"))),o(2),l("label",c(28,73,"meta_image"))("for","meta_image")("required",!1),o(2),l("accept",k(86,X,i.mediaConfig.image))("multipleImage",!1)("image",i.category==null?null:i.category.category_meta_image),o(),l("label",c(31,75,"status"))("for","status")("required",!1),o(6),l("id","category_btn"),o(),B(" ",c(38,77,i.type()==="create"?"save_category":"update_category")," "))},dependencies:[E,G,ge,L,fe,me,Q,ye,Te,Ce,H,he,ve,W,Pe,je,Re,Ke,F],encapsulation:2});let e=r;return e})();var Xe=["deleteModal"],Ye=(e,r)=>[e,r],Ze=(e,r)=>r.id;function et(e,r){if(e&1){let s=D();a(0,"i",8),_("click",function(){S(s);let n=y();return M(n.showChildrenNode=!n.showChildrenNode)}),p()}}function tt(e,r){if(e&1&&(a(0,"a",9),m(1,"i",10),p()),e&2){let s,t=y();l("routerLink",le(1,Ye,t.node().type==="post"?"/blog/category/edit":"/category/edit",(s=t.node())==null?null:s.id))}}function it(e,r){if(e&1){let s=D();a(0,"a",11),_("click",function(){S(s);let n=y();return M(n.DeleteModal().openModal("delete",n.node()))}),m(1,"i",12),p()}}function ot(e,r){if(e&1&&m(0,"app-tree-node",13),e&2){let s=r.$implicit,t=y(2);l("node",s)("displayKey",t.displayKey())("recursionKey",t.recursionKey())}}function rt(e,r){if(e&1&&(a(0,"ul"),P(1,ot,1,3,"app-tree-node",13,Ze),p()),e&2){let s=y();o(),q(s.node()[s.recursionKey()])}}var Qe=(()=>{let r=class r{constructor(){this.store=C(K),this.router=C(V),this.route=C(U),this.node=u(void 0),this.recursionKey=u(void 0),this.displayKey=u(void 0),this.categoryType=u("product"),this.DeleteModal=j("deleteModal"),this.showChildrenNode=!0}ngOnInit(){this.route.params.subscribe(t=>this.id=t.id)}delete(t,n){this.store.dispatch(new ke(n.id,n.type)).subscribe({complete:()=>{n.type=="post"?this.router.navigateByUrl("/blog/category"):this.router.navigateByUrl("/category")}})}};r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=x({type:r,selectors:[["app-tree-node"]],viewQuery:function(n,i){n&1&&O(i.DeleteModal,Xe,5),n&2&&R()},inputs:{node:[1,"node"],recursionKey:[1,"recursionKey"],displayKey:[1,"displayKey"],categoryType:[1,"categoryType"]},decls:12,vars:11,consts:[["deleteModal",""],[1,"cursor-pointer"],[1,"ri-arrow-down-s-line"],[1,"tree-options"],["href","javascript:void(0)",3,"routerLink",4,"hasPermission"],["href","javascript:void(0)",3,"click",4,"hasPermission"],["role","presentation",1,"tree-icon","file-icon"],[3,"deleteItem"],[1,"ri-arrow-down-s-line",3,"click"],["href","javascript:void(0)",3,"routerLink"],[1,"ri-pencil-line","text-success"],["href","javascript:void(0)",3,"click"],[1,"ri-delete-bin-7-line","text-danger"],[3,"node","displayKey","recursionKey"]],template:function(n,i){if(n&1){let T=D();a(0,"li",1)(1,"div"),g(2,et,1,0,"i",2),a(3,"span"),h(4),p(),a(5,"div",3),I(6,tt,2,4,"a",4)(7,it,2,0,"a",5),p(),m(8,"i",6),p(),g(9,rt,3,0,"ul"),p(),a(10,"app-delete-modal",7,0),_("deleteItem",function(ee){return S(T),M(i.delete(ee.actionToPerform,ee.data))}),p()}if(n&2){let T;Y("inside-ul",i.node()[i.recursionKey()]&&i.node()[i.recursionKey()].length),o(2),f(i.node()[i.recursionKey()]&&i.node()[i.recursionKey()].length?2:-1),o(),$(i.node().id===i.id?"active":""),Y("disabled",i.node().status!=="1"),o(),b(i.node()[i.displayKey()]||((T=i.node())==null?null:T.name)),o(2),l("hasPermission","category.edit"),o(),l("hasPermission","category.destroy"),o(2),f(i.node()[i.recursionKey()]&&i.node()[i.recursionKey()].length&&i.showChildrenNode?9:-1)}},dependencies:[r,ce,de,z,Ve],encapsulation:2});let e=r;return e})();var nt=(e,r)=>r.id;function at(e,r){if(e&1&&m(0,"app-tree-node",7),e&2){let s=r.$implicit,t=y(2);l("node",s)("displayKey",t.displayKey())("recursionKey",t.recursionKey())("categoryType",t.categoryType())}}function lt(e,r){if(e&1&&(a(0,"ul",2)(1,"li",4)(2,"div"),m(3,"i",5),a(4,"span"),h(5),d(6,"translate"),p()(),a(7,"ul",6),P(8,at,1,4,"app-tree-node",7,nt),p()()()),e&2){let s=y();o(5),b(c(6,1,"categories")),o(3),q(s.dataToShow)}}function pt(e,r){e&1&&m(0,"app-no-data",8),e&2&&($("no-data-added category-no-data"),l("image","assets/svg/no-category.png")("text","no_categories_found"))}var Ge=(()=>{let r=class r{constructor(){this.type=u(void 0),this.data=u(void 0),this.recursionKey=u(void 0),this.displayKey=u("name"),this.categoryType=u("product"),this.treeSearch=new v(""),this.dataToShow=[],this.treeSearch.valueChanges.subscribe(t=>{t?(this.dataToShow=[],this.data().forEach(n=>{this.hasValue(n)&&this.dataToShow.push(n)})):this.dataToShow=this.data()})}ngOnChanges(){this.dataToShow=this.data()}hasValue(t){let n=!1;return t[this.displayKey()].toLowerCase().includes(this.treeSearch?.value?.toLowerCase())&&(n=!0),t[this.recursionKey()]?.length&&t[this.recursionKey()].forEach(i=>{this.hasValue(i)&&(n=!0)}),n}};r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=x({type:r,selectors:[["app-tree"]],inputs:{type:[1,"type"],data:[1,"data"],recursionKey:[1,"recursionKey"],displayKey:[1,"displayKey"],categoryType:[1,"categoryType"]},features:[A],decls:5,vars:7,consts:[[1,"theme-tree-box"],[1,"form-control",3,"placeholder","formControl"],[1,"tree-main-ul"],[3,"class","image","text"],[1,"cursor-pointer"],["role","presentation",1,"tree-icon","folder-icon"],[1,"child-tree-list"],[3,"node","displayKey","recursionKey","categoryType"],[3,"image","text"]],template:function(n,i){n&1&&(a(0,"div",0),m(1,"input",1),d(2,"translate"),g(3,lt,10,3,"ul",2),p(),g(4,pt,1,4,"app-no-data",3)),n&2&&(o(),l("placeholder",N(c(2,5,"search_category")))("formControl",i.treeSearch),o(2),f(i.dataToShow!=null&&i.dataToShow.length?3:-1),o(),f(i.dataToShow!=null&&i.dataToShow.length?-1:4))},dependencies:[E,G,L,Q,H,_e,Qe,Oe,F],encapsulation:2});let e=r;return e})();var st=["csvModal"];function dt(e,r){if(e&1){let s=D();a(0,"button",15),_("click",function(){S(s);let n=y(3);return M(n.CSVModal().openModal())}),h(1),d(2,"translate"),p()}e&2&&(o(),B(" ",c(2,1,"bulk_import")," "))}function ct(e,r){if(e&1){let s=D();a(0,"button",15),_("click",function(){S(s);let n=y(3);return M(n.export())}),h(1),d(2,"translate"),p()}e&2&&(o(),b(c(2,1,"export")))}function mt(e,r){if(e&1){let s=D();a(0,"button",15),_("click",function(){S(s);let n=y(3);return M(n.create(n.type()))}),h(1),d(2,"translate"),p()}e&2&&(o(),b(c(2,1,"create")))}function ut(e,r){if(e&1&&(a(0,"div",11)(1,"button",12),h(2),d(3,"translate"),p(),a(4,"div",13),g(5,dt,3,3,"button",14),g(6,ct,3,3,"button",14),g(7,mt,3,3,"button",14),p()()),e&2){let s=y(2);o(2),B(" ",c(3,4,"action")," "),o(3),f(s.categoryType()==="product"?5:-1),o(),f(s.categoryType()==="product"?6:-1),o(),f(s.type()==="edit"?7:-1)}}function yt(e,r){if(e&1&&(a(0,"div",10),g(1,ut,8,6,"div",11),p()),e&2){let s=y();o(),f(s.categoryType()==="product"||s.type()==="edit"?1:-1)}}function gt(e,r){if(e&1&&(m(0,"app-form-category",16),d(1,"async")),e&2){let s,t=y();l("categories",(s=c(1,3,t.category$))==null?null:s.data)("type",t.type())("categoryType",t.categoryType())}}var ci=(()=>{let r=class r{constructor(){this.store=C(K),this.router=C(V),this.category$=C(K).select(J.category),this.CSVModal=j("csvModal"),this.type=u("create"),this.categoryType=u("product")}ngOnInit(){this.store.dispatch(new Fe({type:this.categoryType()}))}export(){this.store.dispatch(new Ae)}create(t){this.router.navigate([t=="post"?"/blog/category":"/category"])}};r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=x({type:r,selectors:[["app-category"]],viewQuery:function(n,i){n&1&&O(i.CSVModal,st,5),n&2&&R()},inputs:{type:[1,"type"],categoryType:[1,"categoryType"]},decls:11,vars:11,consts:[["csvModal",""],[1,"row"],[1,"col-xl-4","p-0"],[3,"gridClass","title"],["button","",4,"hasPermission"],[1,"category-tree-box"],[3,"data","recursionKey","type","categoryType"],[1,"col-xl-8","p-0"],[3,"categories","type","categoryType",4,"hasPermission"],[3,"module"],["button",""],["ngbDropdown","",1,"d-inline-block","dropdown-box"],["type","button","id","action","ngbDropdownToggle","",1,"btn","btn-sm","btn-light-bg"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","dropdown-menu-end"],["ngbDropdownItem",""],["ngbDropdownItem","",3,"click"],[3,"categories","type","categoryType"]],template:function(n,i){if(n&1&&(a(0,"div",1)(1,"div",2)(2,"app-page-wrapper",3),I(3,yt,2,1,"div",4),a(4,"div",5),m(5,"app-tree",6),d(6,"async"),p()()(),a(7,"div",7),I(8,gt,2,5,"app-form-category",8),p()(),m(9,"app-import-csv-modal",9,0)),n&2){let T;o(2),l("gridClass","col-sm-12")("title","categories"),o(),l("hasPermission","category.create"),o(2),l("data",(T=c(6,9,i.category$))==null?null:T.data)("recursionKey","subcategories")("type",i.type())("categoryType",i.categoryType()),o(3),l("hasPermission","category."+i.type()),o(),l("module","category")}},dependencies:[se,E,z,Ne,De,xe,Me,we,Se,W,Le,Ge,$e,pe,F],encapsulation:2,changeDetection:0});let e=r;return e})();export{ci as a};

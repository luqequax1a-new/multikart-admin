import{h as de}from"./chunk-VPYJY44D.js";import{i as pe}from"./chunk-WPAIU3ME.js";import{h as T}from"./chunk-KRRVKEPJ.js";import{f as ne}from"./chunk-7RQBIUSJ.js";import{j as ae}from"./chunk-VO736VT2.js";import{a as oe,b as le,c as re,e as se}from"./chunk-DNDGKAFO.js";import{a as ie}from"./chunk-MLWMDQKS.js";import{$ as H,U as N,V as K,X as j,Y as q,Z as U,_ as G,aa as J,ba as X,fa as Y,qa as te}from"./chunk-IKKQDHIF.js";import{c as Z,d as ee}from"./chunk-AWERIOQH.js";import{Ac as F,Ib as _,Kb as v,Lc as p,Mb as V,Mc as d,Nb as D,Ob as k,Pb as f,Pc as Q,Qb as o,Rb as r,Sb as b,Yb as R,Yc as y,Zc as W,_b as I,bb as i,bc as C,dc as u,ja as w,kc as z,lc as A,mc as O,ob as E,qa as g,qc as S,ra as x,rc as s,sc as c,tc as h,ub as M,uc as L,yc as P,zc as $}from"./chunk-KIZZVTEV.js";import{d as B}from"./chunk-4CLCTAJ7.js";var ce=["csvModal"];function me(e,l){if(e&1){let a=I();o(0,"ngx-dropzone-preview",22),C("removed",function(){let n=g(a).$implicit,m=u(3);return x(m.onRemove(n))}),o(1,"ngx-dropzone-label"),s(2),r()()}if(e&2){let a=l.$implicit;f("removable",!0),i(2),L("",a.name," (",a.type,")")}}function _e(e,l){e&1&&(o(0,"a",17),s(1),p(2,"translate"),r()),e&2&&(i(),c(d(2,1,"here")))}function ve(e,l){e&1&&(o(0,"a",18),s(1),p(2,"translate"),r()),e&2&&(i(),c(d(2,1,"here")))}function ue(e,l){e&1&&(o(0,"a",19),s(1),p(2,"translate"),r()),e&2&&(i(),c(d(2,1,"here")))}function fe(e,l){e&1&&(o(0,"a",20),s(1),p(2,"translate"),r()),e&2&&(i(),c(d(2,1,"here")))}function ge(e,l){e&1&&(o(0,"a",21),s(1),p(2,"translate"),r()),e&2&&(i(),c(d(2,1,"here")))}function xe(e,l){e&1&&(o(0,"a",23),s(1),p(2,"translate"),r()),e&2&&(i(),c(d(2,1,"read_the_instructions")))}function Ce(e,l){e&1&&(o(0,"a",24),s(1),p(2,"translate"),r()),e&2&&(i(),c(d(2,1,"read_the_instructions")))}function he(e,l){if(e&1&&(s(0),p(1,"translate"),_(2,xe,3,3,"a",23),_(3,Ce,3,3,"a",24),s(4),p(5,"translate")),e&2){let a=u(3);h(" ",d(1,4,"and_please_ensure_you")," "),i(2),v(a.module()==="product"?2:-1),i(),v(a.module()==="attribute"?3:-1),i(),h(" ",d(5,6,"carefully_before_initiating_the_import")," ")}}function be(e,l){if(e&1){let a=I();o(0,"div",15),C("change",function(n){g(a);let m=u(2);return x(m.onSelect(n))}),o(1,"ngx-dropzone-label")(2,"div")(3,"h2"),s(4),p(5,"translate"),r()()(),D(6,me,3,3,"ngx-dropzone-preview",16,V),r(),o(8,"p"),s(9),p(10,"translate"),_(11,_e,3,3,"a",17),_(12,ve,3,3,"a",18),_(13,ue,3,3,"a",19),_(14,fe,3,3,"a",20),_(15,ge,3,3,"a",21),_(16,he,6,8),R(17),r()}if(e&2){let a=u(2);f("accept",".csv")("multiple",!1),i(4),c(d(5,10,"drop_files_here")),i(2),k(a.files),i(3),h(" ",d(10,12,"please_download_csv")," "),i(2),v(a.module()==="user"?11:-1),i(),v(a.module()==="product"?12:-1),i(),v(a.module()==="attribute"?13:-1),i(),v(a.module()==="tag"?14:-1),i(),v(a.module()==="category"?15:-1),i(),v(a.module()==="product"||a.module()==="attribute"?16:-1)}}function Ie(e,l){if(e&1){let a=I();o(0,"div",2)(1,"h2"),s(2),p(3,"translate"),r(),o(4,"app-button",3),C("click",function(){let n=g(a).$implicit;return x(n.dismiss("Cross click"))}),b(5,"i",4),r()(),o(6,"div",5)(7,"ul",6,1),F("activeIdChange",function(n){g(a);let m=u();return $(m.active,n)||(m.active=n),x(n)}),o(9,"li",7)(10,"a",8),s(11),p(12,"translate"),r(),M(13,be,18,14,"ng-template",9),r()(),b(14,"div",10),r(),o(15,"div",11),b(16,"div",12),o(17,"div",13)(18,"app-button",14),C("click",function(){g(a);let n=u();return x(n.upload())}),s(19),p(20,"translate"),r()()()}if(e&2){let a=O(8),t=u();i(2),c(d(3,13,"import_csv")),i(2),S("btn btn-close"),f("spinner",!1)("id","media_close_btn"),i(3),P("activeId",t.active),i(2),f("ngbNavItem","upload"),i(2),c(d(12,15,"upload")),i(3),f("ngbNavOutlet",a),i(4),S("align-items-center btn btn-theme d-flex"),f("id","upload_csv"),i(),h(" ",d(20,17,"upload")," ")}}var Pe=(()=>{let l=class l{constructor(){this.store=w(te),this.modalService=w(K),this.active="upload",this.modalOpen=!1,this.files=[],this.module=y(void 0),this.note=y(void 0),this.CSVModal=W("csvModal")}openModal(){return B(this,null,function*(){this.modalOpen=!0,this.modalService.open(this.CSVModal(),{ariaLabelledBy:"Media-Modal",centered:!0,windowClass:"theme-modal modal-xl media-modal"}).result.then(t=>{`${t}`,this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})})}getDismissReason(t){return this.active="upload",t===N.ESC?"by pressing ESC":t===N.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}onSelect(t){this.files.push(...t.addedFiles)}onRemove(t){this.files.splice(this.files.indexOf(t),1)}upload(){let t=this.module();if(this.files.length&&t){let n=new T(this.files);t=="user"?n=new T(this.files):t=="product"?n=new ae(this.files):t=="attribute"?n=new pe(this.files):t=="category"?n=new ne(this.files):t=="tag"&&(n=new de(this.files)),this.store.dispatch(n).subscribe({complete:()=>{this.files=[],this.modalService.dismissAll()}})}}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=E({type:l,selectors:[["app-import-csv-modal"]],viewQuery:function(n,m){n&1&&z(m.CSVModal,ce,5),n&2&&A()},inputs:{module:[1,"module"],note:[1,"note"]},decls:2,vars:0,consts:[["csvModal",""],["nav","ngbNav"],[1,"modal-header"],[3,"click","spinner","id"],[1,"ri-close-line"],[1,"modal-body"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"modal-footer"],[1,"left-part"],[1,"right-part"],[3,"click","id"],["ngx-dropzone","",1,"content-section","drop-files-sec",3,"change","accept","multiple"],[3,"removable"],["href","assets/csv/users.csv","download",""],["href","assets/csv/product.csv","download",""],["href","assets/csv/attributes.csv","download",""],["href","assets/csv/tags.csv","download",""],["href","assets/csv/categories.csv","download",""],[3,"removed","removable"],["href","assets/csv/product-bulk-upload-instructions.txt","download",""],["href","assets/csv/attributes-bulk-import-instructions.txt","download",""]],template:function(n,m){n&1&&M(0,Ie,21,19,"ng-template",null,0,Q)},dependencies:[ee,se,re,oe,le,Y,j,G,U,q,J,H,X,ie,Z],encapsulation:2});let e=l;return e})();export{Pe as a};

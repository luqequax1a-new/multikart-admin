import{a as de}from"./chunk-USWHFQNO.js";import{a as se}from"./chunk-Y2Z4WWCH.js";import{l as ne,m as le}from"./chunk-HMBOAMDM.js";import{c as pe,d as ue,e as me}from"./chunk-WPAIU3ME.js";import{a as ae}from"./chunk-MLWMDQKS.js";import{B as Z,C as ee,D as te,d as z,e as c,g as H,h as J,k as f,m as K,q as Q,qa as oe,r as W,s as X,t as Y}from"./chunk-IKKQDHIF.js";import{e as j,g as L}from"./chunk-OTODDIHK.js";import{c as ie,d as re}from"./chunk-AWERIOQH.js";import{Bc as C,Ed as U,Fc as O,Ib as _,Ja as M,Kb as h,Lb as I,Lc as a,Mc as s,Nb as $,Ob as D,Pb as m,Qb as l,Rb as u,Sb as y,Wb as G,Xb as R,Y as q,Yc as P,Z as N,_b as V,bb as i,bc as x,dc as b,g as B,ja as v,n as A,ob as k,qa as T,qc as F,ra as E,rc as d,sc as g,t as w,tc as S}from"./chunk-KIZZVTEV.js";var ve=()=>[];function _e(t,o){t&1&&(l(0,"div",3),d(1),a(2,"translate"),u()),t&2&&(i(),g(s(2,1,"attribute_name_is_required")))}function he(t,o){if(t&1&&(y(0,"select2",4),a(1,"translate"),a(2,"translate")),t&2){let p=b();m("noResultMessage",C(s(1,4,"no_data_found")))("data",p.variantStyle!=null&&p.variantStyle.length?p.variantStyle:O(8,ve))("placeholder",s(2,6,"select_style"))}}function be(t,o){t&1&&(l(0,"div",3),d(1),a(2,"translate"),u()),t&2&&(i(),g(s(2,1,"value_is_required")))}function ye(t,o){if(t&1&&(l(0,"div",15)(1,"div",17),y(2,"input",18),l(3,"h6"),d(4),u()()()),t&2){let p,e=b().$implicit;i(4),g((p=e.get("hex_color"))==null?null:p.value)}}function ge(t,o){if(t&1){let p=V();l(0,"div",16)(1,"a",19),x("click",function(){T(p);let n=b().$index,r=b();return E(r.remove(n))}),d(2),a(3,"translate"),u()()}t&2&&(i(2),g(s(3,1,"remove")))}function Ce(t,o){if(t&1&&(l(0,"app-form-fields",7),a(1,"translate"),l(2,"div",13)(3,"div"),y(4,"input",14),a(5,"translate"),_(6,be,3,3,"div",3),u(),_(7,ye,5,1,"div",15),_(8,ge,4,3,"div",16),u()()),t&2){let p,e=o.$implicit,n=o.$index,r=b();m("formGroupName",C(n))("label",s(1,12,"value"))("for","value")("required",!0),i(3),F(r.form.get("style").value==="color"?"col-sm-7 col-9":"col-sm-10 col-9"),i(),m("placeholder",C(s(5,14,"attribute_value"))),i(2),h(e.get("value").touched&&((p=e.get("value").errors)!=null&&p.required)?6:-1),i(),h(r.form.get("style").value==="color"?7:-1),i(),h((r.valueControl==null||r.valueControl.controls==null?null:r.valueControl.controls.length)>1?8:-1)}}var Ve=(()=>{let o=class o{constructor(){this.store=v(oe),this.route=v(j),this.router=v(L),this.formBuilder=v(Z),this.type=P(void 0),this.documents=[{value:"",hex_color:"",id:""}],this.destroy$=new B,this.variantStyle=[{value:"rectangle",label:"Rectangle"},{value:"circle",label:"Circle"},{value:"radio",label:"Radio"},{value:"dropdown",label:"Dropdown"},{value:"image",label:"Image"},{value:"color",label:"Color"}];let e=v(M);this.isBrowser=U(e),this.form=this.formBuilder.group({name:new f("",[c.required]),style:new f("rectangle",[c.required]),status:new f(1),value:this.formBuilder.array([],[c.required])})}get valueControl(){return this.form.get("value")}ngOnInit(){this.route.params.pipe(q(e=>e.id?this.store.dispatch(new ue(e.id)).pipe(w(()=>this.store.select(de.selectedAttribute))):A()),N(this.destroy$)).subscribe(e=>{this.id=e?.id,this.form.patchValue({name:e?.name,style:e?.style,status:e?.status}),e?.attribute_values.forEach(n=>this.valueControl.push(this.formBuilder.group({value:new f(n.value,[c.required]),hex_color:new f(n.hex_color),id:new f(n.id,[])})))}),this.type()=="create"&&this.documents.forEach(e=>this.valueControl.push(this.formBuilder.group({value:[e.value,[c.required]],hex_color:[e.hex_color],id:[e.id]})))}add(e){e.preventDefault();let n=this.form.get("style").value==="color"?this.formBuilder.group({value:["",[c.required]],hex_color:[""]}):this.formBuilder.group({value:["",[c.required]]});this.valueControl.push(n)}remove(e){this.valueControl.length<=1||this.valueControl.removeAt(+e)}submit(){this.form.markAllAsTouched();let e=new pe(this.form.value);this.type()=="edit"&&this.id&&(e=new me(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/attribute")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=k({type:o,selectors:[["app-form-attribute"]],inputs:{type:[1,"type"]},decls:22,vars:27,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","name","formControlName","name",1,"form-control",3,"placeholder"],[1,"invalid-feedback"],["formControlName","style",1,"custom-select","d-block",3,"data","placeholder","noResultMessage"],[1,"help-text"],["formArrayName","value"],[3,"label","for","required","formGroupName"],[1,"row"],[1,"col-2","offset-sm-2"],[3,"click","id","spinner"],[1,"border-up-class","mt-4"],[3,"id"],[1,"row","g-sm-4","g-3","align-items-center"],["type","text","formControlName","value",1,"form-control",3,"placeholder"],[1,"col-sm-3","col-9"],[1,"col-sm-2","col-3"],[1,"color-box"],["type","color","formControlName","hex_color",1,"form-control"],[1,"invalid-feedback","h-100","w-100","cursor-pointer",3,"click"]],template:function(n,r){n&1&&(l(0,"form",0),x("ngSubmit",function(){return r.submit()}),l(1,"app-form-fields",1),a(2,"translate"),y(3,"input",2),a(4,"translate"),_(5,_e,3,3,"div",3),u(),l(6,"app-form-fields",1),_(7,he,3,9,"select2",4),l(8,"p",5),d(9),u()(),G(10,6),$(11,Ce,9,16,"app-form-fields",7,I),R(),l(13,"div",8)(14,"div",9)(15,"app-button",10),x("click",function(fe){return r.add(fe)}),d(16),a(17,"translate"),u()()(),l(18,"div",11)(19,"app-button",12),d(20),a(21,"translate"),u()()()),n&2&&(m("formGroup",r.form),i(),m("label",s(2,19,"attribute_name"))("for","name")("required",!0),i(2),m("placeholder",C(s(4,21,"attribute_name"))),i(2),h(r.form.controls.name.touched&&(r.form.controls.name.errors!=null&&r.form.controls.name.errors.required)?5:-1),i(),m("label","style")("for","style")("required",!0),i(),h(r.isBrowser?7:-1),i(2),S(" ","*Choose the desired shape style, such as rectangle or circle. Based on your selection, variant options will be displayed on product page."," "),i(2),D(r.valueControl.controls),i(4),F("btn btn-theme"),m("id","add_value_btn")("spinner",!1),i(),S(" ",s(17,23,"add_value")," "),i(3),m("id","attribute_btn"),i(),S(" ",s(21,25,r.type()==="create"?"save_attribute":"update_attribute")," "))},dependencies:[re,ee,K,z,H,J,te,Q,Y,W,X,le,ne,se,ae,ie],encapsulation:2});let t=o;return t})();export{Ve as a};

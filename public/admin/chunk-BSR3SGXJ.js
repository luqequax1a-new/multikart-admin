import{c as pe,d as de,e as F}from"./chunk-L64HS5AO.js";import{a as ce}from"./chunk-DRWHSBYU.js";import{a as me}from"./chunk-LCVX2N4P.js";import"./chunk-M3HD75V3.js";import{a as le}from"./chunk-Y2Z4WWCH.js";import"./chunk-QVI36XHK.js";import{a as ae}from"./chunk-VO736VT2.js";import"./chunk-DNDGKAFO.js";import{a as se}from"./chunk-3ARB4UI6.js";import"./chunk-HD5XXWEJ.js";import"./chunk-HJPVTB2W.js";import{a as ne}from"./chunk-MLWMDQKS.js";import{a as re}from"./chunk-MPC4A6Z2.js";import"./chunk-Q3XL2YFP.js";import"./chunk-5DTRVH74.js";import"./chunk-GG7AHMIJ.js";import{$ as Y,C as z,D as J,X as $,Y as q,Z as Q,_ as X,aa as Z,ba as ee,c as U,fa as te,g as j,h as L,i as h,k as _,m as W,q as H,qa as S,r as K,t as R}from"./chunk-IKKQDHIF.js";import"./chunk-OTODDIHK.js";import"./chunk-EY6JDCC6.js";import{c as ie,d as oe}from"./chunk-AWERIOQH.js";import{Ac as O,Gc as P,Lc as V,Mc as x,Pb as a,Qb as m,Rb as c,Sb as g,_b as y,bb as s,bc as N,dc as w,g as I,ja as u,mc as E,ob as G,qa as f,ra as v,rc as C,sc as k,tc as B,ub as b,va as A,x as T,yc as D,zc as M}from"./chunk-KIZZVTEV.js";import"./chunk-4CLCTAJ7.js";var fe=i=>[i];function ve(i,l){if(i&1){let p=y();m(0,"div",14)(1,"app-form-fields",15)(2,"app-image-upload",16),N("selectedFiles",function(t){f(p);let o=w();return v(o.selectBanner(t,"content.video.video_url"))}),c()(),m(3,"app-form-fields",15)(4,"div",17)(5,"label",18),g(6,"input",19)(7,"span",20),c()()()()}if(i&2){let p,e=w();s(),a("label","Video")("for","video_url"),s(),a("url",!0)("multipleImage",!1)("accept",P(9,fe,e.mediaConfig.video))("helpText","*Upload video size 10mb recommended")("imageUrl",(p=e.form.get("content.video.video_url"))==null?null:p.value),s(),a("label","status")("for","status")}}function ge(i,l){i&1&&(m(0,"app-button",21),C(1),V(2,"translate"),c()),i&2&&(a("id","theme_1_submit"),s(),B(" ",x(2,2,"submit")," "))}var Oe=(()=>{let l=class l{constructor(){this.store=u(S),this.document=u(A),this.home_page$=u(S).select(F.homePage),this.active="video",this.search=new I,this.mediaConfig=me,this.filter={status:1,search:"",paginate:15,ids:"",with_union_products:0,is_approved:1},this.form=new h({content:new h({video:new h({status:new _(!0),video_url:new _("")})}),slug:new _("video")})}ngOnInit(){let e=this.store.dispatch(new pe({slug:"video"}));T([e]).subscribe({complete:()=>{this.store.select(F.homePage).subscribe({next:t=>{t?.content?.products_ids&&(this.filter.paginate=t?.content?.products_ids?.length>=15?t?.content?.products_ids?.length:15,this.filter.ids=t?.content?.products_ids?.join(),this.filter.with_union_products=t?.content?.products_ids?.length?t?.content?.products_ids?.length>=15?0:1:0),this.store.dispatch(new ae(this.filter)).subscribe({complete:()=>{this.patchForm()}})}})}})}patchForm(){this.home_page$.subscribe(e=>{this.page_data=e,this.form.patchValue({content:{video:{status:e?.content?.video?.status,video_url:e?.content?.video?.video_url}},slug:e?.slug})})}selectCategoryItem(e,t){Array.isArray(e)&&this.form.get(t)?.setValue(e)}selectBanner(e,t){this.form.get(t)?.setValue(e||null)}searchProduct(e){this.search.next(e.search)}concatDynamicProductKeys(e){let t=[];function o(r){if(Array.isArray(r))r.forEach(o);else if(r!==null&&typeof r=="object")for(let[d,n]of Object.entries(r))d==="product_ids"&&Array.isArray(n)&&n.every(ue=>typeof ue=="number")?t.push(...n):d==="product_ids"&&typeof n=="number"?t.push(n):o(n)}return o(e),t}submit(){let e=Array.from(new Set(this.concatDynamicProductKeys(this.form.value)));this.form.get("content.products_ids")?.setValue(e),this.form.valid&&this.store.dispatch(new de(this.page_data.id,this.form.value))}};l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=G({type:l,selectors:[["app-video"]],decls:16,vars:9,consts:[["nav","ngbNav"],[3,"gridClass","title"],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[1,"vertical-tabs"],[1,"row"],[1,"col-xl-3","col-lg-4"],["ngbNav","","orientation","vertical","formGroupName","content",1,"nav-pills",3,"activeIdChange","activeId"],["ngbNavItem","video"],["ngbNavLink",""],[1,"ri-record-circle-line"],["ngbNavContent",""],[1,"col-xl-7","col-lg-8"],[3,"ngbNavOutlet"],[3,"id",4,"hasPermission"],["formGroupName","video"],[3,"label","for"],[3,"selectedFiles","url","multipleImage","accept","helpText","imageUrl"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"]],template:function(t,o){if(t&1){let r=y();m(0,"app-page-wrapper",1)(1,"form",2),N("ngSubmit",function(){return f(r),v(o.submit())}),m(2,"div",3)(3,"div",4)(4,"div",5)(5,"ul",6,0),O("activeIdChange",function(n){return f(r),M(o.active,n)||(o.active=n),v(n)}),m(7,"li",7)(8,"a",8),g(9,"i",9),C(10),V(11,"translate"),c(),b(12,ve,8,11,"ng-template",10),c()()(),m(13,"div",11),g(14,"div",12),c()(),b(15,ge,3,4,"app-button",13),c()()()}if(t&2){let r=E(6);a("gridClass","col-sm-12")("title","video_settings"),s(),a("formGroup",o.form),s(4),D("activeId",o.active),s(5),k(x(11,7,"video")),s(4),a("ngbNavOutlet",r),s(),a("hasPermission","theme.edit")}},dependencies:[oe,z,W,U,j,L,J,H,R,K,te,$,X,Q,q,Z,Y,ee,se,re,le,ce,ne,ie],encapsulation:2});let i=l;return i})();export{Oe as Video};

import{a as B}from"./chunk-NESFM7HZ.js";import{a as U}from"./chunk-5K53EF6F.js";import"./chunk-MLWMDQKS.js";import{a as T}from"./chunk-Q3XL2YFP.js";import"./chunk-IKKQDHIF.js";import{e as k,g as I}from"./chunk-OTODDIHK.js";import"./chunk-EY6JDCC6.js";import{c as S,d as E}from"./chunk-AWERIOQH.js";import{$a as v,Ad as D,Lc as C,Mc as x,Pb as c,Qb as d,Rb as a,Sb as h,_b as M,a as y,bb as s,bc as f,dc as m,ja as l,ob as w,qa as p,qd as P,ra as u,rc as g,sc as O,tc as b,ub as _}from"./chunk-KIZZVTEV.js";import"./chunk-4CLCTAJ7.js";function V(i,r){if(i&1&&(d(0,"span",12),g(1),a()),i&2){let o=m();s(),b("Units_Id: ",o.unitData.id)}}function F(i,r){i&1&&(d(0,"div",13),h(1,"app-loader"),a())}function N(i,r){if(i&1){let o=M();d(0,"app-form-units",14),f("formSubmit",function(e){p(o);let n=m();return u(n.onSubmit(e))})("formCancel",function(){p(o);let e=m();return u(e.onCancel())})("formChange",function(e){p(o);let n=m();return u(n.onFormChange(e))}),a()}if(i&2){let o=m();c("loading",o.loading)("initialData",o.unitData)}}var Z=(()=>{let r=class r{constructor(){this.unitsService=l(U),this.router=l(I),this.route=l(k),this.loading=!1,this.pageLoading=!0,this.unitData=null,this.unitId=0,this.unitName="",this.formDirty=!1,this.subscriptions=new y}ngOnInit(){this.unitId=Number(this.route.snapshot.paramMap.get("id")),this.loadUnit()}loadUnit(){this.pageLoading=!0,this.unitsService.getById(this.unitId).subscribe({next:t=>{this.unitData=t,this.pageLoading=!1},error:t=>{this.pageLoading=!1,console.error("Birim bilgileri y\xFCklenirken hata:",t),this.router.navigate(["/units"])}})}onSubmit(t){this.loading=!0,this.unitsService.update(this.unitId,t).subscribe({next:e=>{this.loading=!1,this.formDirty=!1,this.showToast("Birim ba\u015Far\u0131yla g\xFCncellendi.","success"),setTimeout(()=>{this.router.navigate(["/units"])},1e3)},error:e=>{this.loading=!1,console.error("Birim g\xFCncellenirken hata:",e),this.showToast("Birim g\xFCncellenirken bir hata olu\u015Ftu. L\xFCtfen tekrar deneyin.","error")}})}onCancel(){this.formDirty?confirm("Kaydedilmemi\u015F de\u011Fi\u015Fiklikleriniz var. Yine de \xE7\u0131kmak istiyor musunuz?")&&(this.formDirty=!1,this.router.navigate(["/units"])):this.router.navigate(["/units"])}onFormChange(t){this.formDirty=t}unloadNotification(t){this.formDirty&&(t.returnValue="Kaydedilmemi\u015F de\u011Fi\u015Fiklikleriniz var. Yine de \xE7\u0131kmak istiyor musunuz?")}showToast(t,e){console.log(`Toast [${e}]: ${t}`)}ngOnDestroy(){this.subscriptions.unsubscribe()}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=w({type:r,selectors:[["app-edit-units"]],hostBindings:function(e,n){e&1&&f("beforeunload",function(z){return n.unloadNotification(z)},v)},decls:16,vars:9,consts:[[1,"container-fluid","px-xxl-5","px-lg-4","px-3"],[1,"card","shadow-sm","border-0","rounded-3"],[1,"card-header","border-0","bg-white"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center","gap-2"],[1,"fw-600","mb-0"],["class","badge bg-primary text-white px-3 py-2",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"ri-arrow-left-line","me-1"],[1,"card-body","p-4","p-md-4","p-lg-4"],["class","text-center py-5",4,"ngIf"],[3,"loading","initialData","formSubmit","formCancel","formChange",4,"ngIf"],[1,"badge","bg-primary","text-white","px-3","py-2"],[1,"text-center","py-5"],[3,"formSubmit","formCancel","formChange","loading","initialData"]],template:function(e,n){e&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),g(6),C(7,"translate"),a(),_(8,V,2,1,"span",6),a(),d(9,"button",7),f("click",function(){return n.onCancel()}),h(10,"i",8),g(11),C(12,"translate"),a()()(),d(13,"div",9),_(14,F,2,0,"div",10)(15,N,1,2,"app-form-units",11),a()()()),e&2&&(s(6),O(x(7,5,"Birim D\xFCzenle")),s(2),c("ngIf",n.unitData),s(3),b(" ",x(12,7,"Listeye D\xF6n")," "),s(3),c("ngIf",n.pageLoading),s(),c("ngIf",!n.pageLoading&&n.unitData))},dependencies:[D,P,E,B,T,S],styles:[".container-fluid[_ngcontent-%COMP%]{margin-top:1rem}.card.shadow-sm[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013!important}.card.border-0[_ngcontent-%COMP%]{border:none!important}.card.rounded-3[_ngcontent-%COMP%]{border-radius:.375rem!important}.card[_ngcontent-%COMP%]   .card-header.border-0[_ngcontent-%COMP%]{border-bottom:none!important}.card[_ngcontent-%COMP%]   .card-header.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h4.fw-600[_ngcontent-%COMP%]{font-weight:600;color:#495057}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .badge.bg-light[_ngcontent-%COMP%]{background-color:#f8f9fa!important;color:#6c757d!important;font-size:.75rem;padding:.25rem .5rem}@media (min-width: 1400px){.card[_ngcontent-%COMP%]   .card-body.p-xxl-4[_ngcontent-%COMP%]{padding:1.5rem!important}}.card[_ngcontent-%COMP%]   .card-body.p-3[_ngcontent-%COMP%]{padding:1rem!important}.btn.btn-outline-secondary.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem}.btn.btn-outline-secondary.btn-sm[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}"]});let i=r;return i})();export{Z as EditUnits};

import{b as ee}from"./chunk-SPPECMGV.js";import{a as te}from"./chunk-Y2Z4WWCH.js";import{l as Y,m as Z}from"./chunk-HMBOAMDM.js";import{C as J,D as K,d as j,g as z,h as A,q,qa as X,t as H}from"./chunk-IKKQDHIF.js";import{c as Q,d as W}from"./chunk-AWERIOQH.js";import{Ad as G,Bc as C,Ed as U,Fc as x,Ib as d,J as P,Ja as I,Kb as m,Lc as u,Mc as _,Pb as r,Pc as B,Qb as c,Rb as s,Sb as g,Xc as $,Yc as N,Za as w,_b as S,bb as a,bc as T,dc as p,g as F,ja as y,mc as E,ob as O,qa as f,qc as L,ra as h,rc as R,tc as V,ub as M}from"./chunk-KIZZVTEV.js";var D=()=>[];function ie(e,l){if(e&1){let t=S();c(0,"select2",4),u(1,"translate"),u(2,"translate"),T("click",function(){f(t);let o=p();return h(o.selectImageLink())}),s()}if(e&2){let t=p();r("noResultMessage",C(_(1,4,"no_data_found")))("data",t.linkOption&&t.linkOption.length?t.linkOption:x(8,D))("placeholder",_(2,6,"select_link"))}}function ne(e,l){if(e&1&&(c(0,"div",7),g(1,"img",8),s(),R(2)),e&2){let t=l.data;a(),L("img-fluid selection-image"),r("src",t.image,w),a(),V(" ",t.name," ")}}function le(e,l){if(e&1){let t=S();c(0,"select2",6),u(1,"translate"),u(2,"translate"),T("update",function(o){f(t);let n=p(2);return h(n.selectProduct(o))})("close",function(o){f(t);let n=p(2);return h(n.productDropdown(o))})("search",function(o){f(t);let n=p(2);return h(n.searchProduct(o))}),M(3,ne,3,4,"ng-template",null,0,B),s()}if(e&2){let t=E(4),i=p(2);r("noResultMessage",C(_(1,6,"no_data_found")))("templates",t)("data",i.products()&&i.products().length?i.products():x(10,D))("placeholder",_(2,8,"select_product"))("customSearchEnabled",!0)}}function oe(e,l){if(e&1&&(c(0,"app-form-fields",2),d(1,le,5,11,"select2",5),s()),e&2){let t=p();r("label","product")("for","link"),a(),m(t.isBrowser?1:-1)}}function ae(e,l){if(e&1&&(c(0,"div",7),g(1,"img",8),s(),R(2)),e&2){let t=l.data;a(),L("img-fluid selection-image"),r("src",t.image,w),a(),V(" ",t.name," ")}}function re(e,l){if(e&1&&(c(0,"select2",9),u(1,"translate"),u(2,"translate"),M(3,ae,3,4,"ng-template",null,0,B),s()),e&2){let t=E(4),i=p(2);r("noResultMessage",C(_(1,5,"no_data_found")))("templates",t)("data",i.categories&&i.categories.length?i.categories:x(9,D))("placeholder",_(2,7,"select_categories"))}}function se(e,l){if(e&1&&(c(0,"app-form-fields",2),d(1,re,5,10,"select2",9),s()),e&2){let t=p();r("label","categories")("for","type"),a(),m(t.isBrowser?1:-1)}}function ce(e,l){e&1&&(c(0,"app-form-fields",2),g(1,"input",10),s()),e&2&&r("label","external_url")("for","type")}var ye=(()=>{let l=class l{constructor(){this.linkForm=N(void 0),this.products=N(void 0),this.productFilter=$(),this.categories$=y(X).select(ee.categories),this.destroy$=new F,this.search=new F,this.filter={search:"",paginate:15,ids:"",with_union_products:!1},this.linkOption=[{label:"Product",value:"product"},{label:"Collection",value:"collection"},{label:"External Url",value:"external_url"}];let i=y(I);this.isBrowser=U(i),this.categories=[],this.categories$.subscribe(o=>{o?.forEach(n=>{this.categories?.push({label:n?.label,value:n?.data.slug,data:{name:n?.data.name,slug:n?.data.slug,image:n?.data.image?n?.data.image:"assets/images/product.png"}})})})}ngOnInit(){this.search.pipe(P(300)).subscribe(i=>{this.filter.search=i,this.productFilter.emit(this.filter)})}selectProduct(i){this.linkForm()?.get("product_ids")?.setValue(i?.value)}productDropdown(i){i.innerSearchText&&(this.productFilter.emit(this.filter),this.search.next(""))}searchProduct(i){this.search.next(i.search)}selectImageLink(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=O({type:l,selectors:[["app-link"]],inputs:{linkForm:[1,"linkForm"],products:[1,"products"]},outputs:{productFilter:"productFilter"},decls:6,vars:7,consts:[["template",""],[3,"formGroup"],[3,"label","for"],["multiple","false","formControlName","link_type","resettable","",1,"custom-select",3,"data","placeholder","noResultMessage"],["multiple","false","formControlName","link_type","resettable","",1,"custom-select",3,"click","data","placeholder","noResultMessage"],["formControlName","link","multiple","false","resettable","",1,"custom-select",3,"templates","data","placeholder","noResultMessage","customSearchEnabled"],["formControlName","link","multiple","false","resettable","",1,"custom-select",3,"update","close","search","templates","data","placeholder","noResultMessage","customSearchEnabled"],[1,"image"],["alt","img",3,"src"],["formControlName","link","multiple","false","resettable","",1,"custom-select",3,"templates","data","placeholder","noResultMessage"],["id","external_url","type","url","formControlName","link","placeholder","https://youdomain.com/",1,"form-control"]],template:function(o,n){if(o&1&&(c(0,"div",1)(1,"app-form-fields",2),d(2,ie,3,9,"select2",3),s(),d(3,oe,2,3,"app-form-fields",2),d(4,se,2,3,"app-form-fields",2),d(5,ce,2,2,"app-form-fields",2),s()),o&2){let k,v,b;r("formGroup",n.linkForm()),a(),r("label","select_link")("for","type"),a(),m(n.isBrowser?2:-1),a(),m(((k=n.linkForm())==null||k.value==null?null:k.value.link_type)==="product"?3:-1),a(),m(((v=n.linkForm())==null||v.value==null?null:v.value.link_type)==="collection"?4:-1),a(),m(((b=n.linkForm())==null||b.value==null?null:b.value.link_type)==="external_url"?5:-1)}},dependencies:[G,J,j,z,A,K,q,H,Z,Y,W,te,Q],encapsulation:2});let e=l;return e})();export{ye as a};

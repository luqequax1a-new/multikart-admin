import{a as Ue,b as te}from"./chunk-UHNLJRH7.js";import{c as Le,f as qe,g as Qe,i as We}from"./chunk-2QIDAN5L.js";import{l as Ve,m as Re}from"./chunk-HMBOAMDM.js";import{a as X}from"./chunk-2MGWSW7E.js";import"./chunk-T5ULGFUG.js";import{d as Ae}from"./chunk-YJGMUJNE.js";import{a as He}from"./chunk-MLWMDQKS.js";import{a as je}from"./chunk-MPC4A6Z2.js";import"./chunk-Q3XL2YFP.js";import"./chunk-GG7AHMIJ.js";import{C as Oe,D as Fe,U as V,V as J,d as Pe,g as ke,k as Ne,p as $e,qa as D}from"./chunk-IKKQDHIF.js";import{e as De,h as Me,l as Te}from"./chunk-OTODDIHK.js";import"./chunk-EY6JDCC6.js";import{c as R,d as j}from"./chunk-AWERIOQH.js";import{Ad as G,Bc as Se,Cc as A,Da as me,Ec as be,Ed as Be,Fc as Ie,Gc as ee,Ib as v,Ja as _e,Kb as h,La as ve,Lc as d,Mc as s,Nb as N,Nc as K,Ob as $,Pb as g,Pc as z,Qb as r,Rb as o,Sb as x,Y as de,Z as se,Za as Q,Zc as P,_b as M,bb as i,bc as S,dc as _,ea as pe,fa as ue,g as re,ia as ce,ja as y,kc as T,lc as O,mc as U,n as ae,ob as k,oc as fe,od as Ce,pb as he,qa as C,qb as ge,qc as F,ra as w,rc as a,sb as ye,sc as c,t as oe,tc as m,td as Z,ub as W,uc as xe,ud as we,vc as Y,vd as Ee,wd as E,xc as H}from"./chunk-KIZZVTEV.js";import{a as b,b as I,d as q}from"./chunk-4CLCTAJ7.js";var Xe=["noteModal"];function Ye(l,u){if(l&1){let e=M();r(0,"div",2)(1,"h5",3),a(2),d(3,"translate"),o(),r(4,"div",4),x(5,"textarea",5,1),d(7,"translate"),o(),x(8,"input",6),d(9,"translate"),r(10,"div",7)(11,"app-button",8),S("click",function(){let p=C(e).$implicit;return w(p.dismiss("Cancel"))}),a(12),d(13,"translate"),o(),r(14,"app-button",9),S("click",function(){let p=C(e).$implicit,n=U(6),f=_();return w(f.submit(p,n.value))}),a(15),d(16,"translate"),o()()()}if(l&2){let e=_();i(2),c(s(3,16,"shipping_note")),i(3),g("placeholder",A("",s(7,18,"enter_description")," (optional)")),i(3),g("placeholder",Se(s(9,20,"enter_end_date")))("formControl",e.date),i(3),F("btn-md fw-bold btn btn-secondary"),g("type","button")("spinner",!1)("id","cancel_btn"),i(),m(" ",s(13,22,"cancel")," "),i(2),F("btn-theme btn-md fw-bold btn"),g("id","yes_btn"),i(),m(" ",s(16,24,"submit")," ")}}var ze=(()=>{let u=class u{constructor(){this.modalService=y(J),this.datePipe=y(E),this.store=y(D),this.modalOpen=!1,this.date=new Ne,this.NoteModal=P("noteModal")}openModal(t,p){return q(this,null,function*(){this.modalOpen=!0,this.orderId=t,this.statusId=p,this.date.patchValue(""),this.modalService.open(this.NoteModal(),{ariaLabelledBy:"Note-Modal",centered:!0,backdrop:"static",keyboard:!1,windowClass:"theme-modal"}).result.then(n=>{`${n}`},n=>{this.closeResult=`Dismissed ${this.getDismissReason(n)}`})})}getDismissReason(t){return t===V.ESC?"by pressing ESC":t===V.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}submit(t,p){let n=new Date;this.datePipe.transform(this.date.value?this.date.value:n,"yyyy-MM-ddTHH:mm:ss.SSSSSSZ"),this.store.dispatch(new qe(this?.orderId,{order_status_id:Number(this.statusId),note:p,changed_at:this.datePipe.transform(n,"yyyy-MM-ddTHH:mm:ss.SSSSSSZ")})).subscribe({complete:()=>{t.dismiss()}})}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}};u.\u0275fac=function(p){return new(p||u)},u.\u0275cmp=k({type:u,selectors:[["app-shipping-note-modal"]],viewQuery:function(p,n){p&1&&T(n.NoteModal,Xe,5),p&2&&O()},decls:2,vars:0,consts:[["noteModal",""],["descriptionField",""],[1,"modal-body"],[1,"modal-title","text-center"],[1,"mb-4","mt-2"],["rows","3",1,"form-control",3,"placeholder"],["type","datetime-local",1,"form-control","mb-3",3,"placeholder","formControl"],[1,"button-box"],[3,"click","type","spinner","id"],[3,"click","id"]],template:function(p,n){p&1&&W(0,Ye,17,26,"ng-template",null,0,z)},dependencies:[j,Oe,Pe,ke,Fe,$e,He,R],encapsulation:2});let l=u;return l})();var et=(()=>{class l{nonce;_printStyle=[];_styleSheetFile="";constructor(e){this.nonce=e}setPrintStyle(e){this._printStyle=[];for(let t in e)e.hasOwnProperty(t)&&this._printStyle.push((t+JSON.stringify(e[t])).replace(/['"]+/g,""))}returnStyleValues(){return`<style${this.nonce?` nonce="${this.nonce}"`:""}> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}returnStyleSheetLinkTags(){return this._styleSheetFile}setStyleSheetFile(e){let t=function(p){return`<link rel="stylesheet" type="text/css" href="${p}">`};if(e.indexOf(",")!==-1){let p=e.split(",");this._styleSheetFile=p.map(n=>t(n)).join("")}else this._styleSheetFile=t(e)}updateInputDefaults(e){for(let t=0;t<e.length;t++){let p=e[t];p.defaultValue=p.value,p.checked&&(p.defaultChecked=!0)}}updateSelectDefaults(e){for(let t=0;t<e.length;t++){let p=e[t],n=p.selectedIndex,f=p.options[n];f.defaultSelected=!0}}updateTextAreaDefaults(e){for(let t=0;t<e.length;t++){let p=e[t];p.defaultValue=p.value}}canvasToImageHtml(e){return`<img src="${e.toDataURL()}" style="max-width: 100%;">`}updateCanvasToImage(e){for(let t=0;t<e.length;t++){let p=this.canvasToImageHtml(e[t]);e[t].insertAdjacentHTML("afterend",p),e[t].remove()}}getHtmlContents(e){let t=document.getElementById(e);if(!t)return null;let p=t.getElementsByTagName("input"),n=t.getElementsByTagName("select"),f=t.getElementsByTagName("textarea"),B=t.getElementsByTagName("canvas");return this.updateInputDefaults(p),this.updateSelectDefaults(n),this.updateTextAreaDefaults(f),this.updateCanvasToImage(B),t.innerHTML}getElementTag(e){let t=[],p=document.getElementsByTagName(e);for(let n=0;n<p.length;n++)t.push(p[n].outerHTML);return t.join(`\r
`)}print(e){let t="",p="",n="top=0,left=0,height=auto,width=auto",f=this.getElementTag("base");e.useExistingCss&&(t=this.getElementTag("style"),p=this.getElementTag("link")),e.openNewTab&&(n="");let B=this.getHtmlContents(e.printSectionId);if(!B){console.error(`Print section with id ${e.printSectionId} not found.`);return}let L=window.open("","_blank",n);if(!L){console.error("Could not open print window.");return}L.document.open(),L.document.write(`
          <html>
            <head>
              <title>${e.printTitle?e.printTitle:""}</title>
              ${f}
              ${this.returnStyleValues()}
              ${this.returnStyleSheetLinkTags()}
              ${t}
              ${p}
            </head>
            <body ${e.bodyClass?`class="${e.bodyClass}"`:""}>
              ${B}
              <script defer>
                function triggerPrint(event) {
                  window.removeEventListener('load', triggerPrint, false);
                  ${e.previewOnly?"":`setTimeout(function() {
                    closeWindow(window.print());
                  }, ${e.printDelay});`}
                }
                function closeWindow(){
                  ${e.closeWindow?"window.close();":""}
                }
                window.addEventListener('load', triggerPrint, false);
              <\/script>
            </body>
          </html>`),L.document.close()}static \u0275fac=function(t){return new(t||l)(ce(ve,8))};static \u0275prov=pe({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var ne=class{printSectionId="";printTitle="";useExistingCss=!1;bodyClass="";openNewTab=!1;previewOnly=!1;closeWindow=!0;printDelay=0;constructor(u){u&&Object.assign(this,u)}},Ze=(()=>{class l extends et{printOptions=new ne;set previewOnly(e){this.printOptions=I(b({},this.printOptions),{previewOnly:e})}set printSectionId(e){this.printOptions=I(b({},this.printOptions),{printSectionId:e})}set printTitle(e){this.printOptions=I(b({},this.printOptions),{printTitle:e})}set useExistingCss(e){this.printOptions=I(b({},this.printOptions),{useExistingCss:e})}set printDelay(e){this.printOptions=I(b({},this.printOptions),{printDelay:e})}set closeWindow(e){this.printOptions=I(b({},this.printOptions),{closeWindow:e})}set bodyClass(e){this.printOptions=I(b({},this.printOptions),{bodyClass:e})}set openNewTab(e){this.printOptions=I(b({},this.printOptions),{openNewTab:e})}set printStyle(e){super.setPrintStyle(e)}set styleSheetFile(e){super.setStyleSheetFile(e)}print(){super.print(this.printOptions)}static \u0275fac=(()=>{let e;return function(p){return(e||(e=me(l)))(p||l)}})();static \u0275dir=ge({type:l,selectors:[["button","ngxPrint",""]],hostBindings:function(t,p){t&1&&S("click",function(){return p.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",closeWindow:"closeWindow",bodyClass:"bodyClass",openNewTab:"openNewTab",printStyle:"printStyle",styleSheetFile:"styleSheetFile"},features:[ye]})}return l})(),Ge=(()=>{class l{static \u0275fac=function(t){return new(t||l)};static \u0275mod=he({type:l});static \u0275inj=ue({})}return l})();var nt=["posInvoice"],lt=(l,u)=>u.id;function rt(l,u){if(l&1&&(r(0,"li"),a(1),d(2,"translate"),r(3,"span"),a(4),o()()),l&2){let e=_(2);i(),m(" ",s(2,6,"address"),": "),i(3),H(" ",e.order==null||e.order.shipping_address==null?null:e.order.shipping_address.street," ",e.order==null||e.order.shipping_address==null?null:e.order.shipping_address.city," ",e.order==null||e.order.shipping_address==null||e.order.shipping_address.state==null?null:e.order.shipping_address.state.name," ",e.order==null||e.order.shipping_address==null||e.order.shipping_address.country==null?null:e.order.shipping_address.country.name," ",e.order==null||e.order.shipping_address==null?null:e.order.shipping_address.pincode," ")}}function at(l,u){if(l&1&&(r(0,"tr")(1,"td",7),a(2),o(),r(3,"td",8),a(4),o(),r(5,"td",9),a(6),d(7,"currencySymbol"),o()()),l&2){let e=u.$implicit;i(2),c(e==null||e.pivot==null?null:e.pivot.quantity),i(2),m(" ",!(e==null||e.pivot==null)&&e.pivot.variation?e==null||e.pivot==null||e.pivot.variation==null?null:e.pivot.variation.name:e==null?null:e.name," "),i(2),c(s(7,3,e==null||e.pivot==null?null:e.pivot.subtotal))}}function ot(l,u){if(l&1&&(r(0,"tr",10)(1,"td",11),a(2),d(3,"translate"),o(),r(4,"td",9),a(5),d(6,"currencySymbol"),o()()),l&2){let e=_(2);i(2),m("",s(3,2,"shipping"),":"),i(3),m(" ",s(6,4,e.order!=null&&e.order.shipping_total?e.order==null?null:e.order.shipping_total:0)," ")}}function dt(l,u){if(l&1){let e=M();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h4"),a(5),d(6,"async"),d(7,"async"),o()(),r(8,"ul",5)(9,"li"),a(10),d(11,"translate"),o(),r(12,"li"),a(13),d(14,"translate"),r(15,"span"),a(16),d(17,"date"),o()(),v(18,rt,5,8,"li"),r(19,"li"),a(20),d(21,"translate"),r(22,"span"),a(23),o()(),r(24,"li"),a(25),d(26,"translate"),r(27,"span"),a(28),o()(),r(29,"li"),a(30),d(31,"translate"),r(32,"span"),a(33),o()()(),r(34,"table",6)(35,"thead")(36,"tr")(37,"th",7),a(38),d(39,"translate"),o(),r(40,"th",8),a(41),d(42,"translate"),o(),r(43,"th",9),a(44),d(45,"translate"),o()()(),r(46,"tbody"),N(47,at,8,5,"tr",null,lt),r(49,"tr",10)(50,"td",11),a(51),d(52,"translate"),o(),r(53,"td",9),a(54),d(55,"currencySymbol"),o()(),v(56,ot,7,6,"tr",10),r(57,"tr",10)(58,"td",11),a(59),d(60,"translate"),o(),r(61,"td",9),a(62),d(63,"currencySymbol"),o()(),r(64,"tr",10)(65,"td",11),a(66),d(67,"translate"),o(),r(68,"td",9),a(69),d(70,"currencySymbol"),o()(),r(71,"tr",10)(72,"td",11),a(73),d(74,"translate"),o(),r(75,"td",9),a(76),d(77,"currencySymbol"),o()()()(),r(78,"p",12),a(79),d(80,"translate"),o()(),r(81,"div",13)(82,"button",14),a(83),d(84,"translate"),o(),r(85,"button",15),S("click",function(){let p=C(e).$implicit;return w(p.dismiss("Cross click"))}),a(86),d(87,"translate"),o()()()()}if(l&2){let e,t=_();i(5),m(" ",!((e=s(6,27,t.setting$))==null||e.general==null)&&e.general.site_name?(e=s(7,29,t.setting$))==null||e.general==null?null:e.general.site_name:""," "),i(5),xe("",s(11,31,"order_number"),": ",t.order==null?null:t.order.order_number),i(3),m(" ",s(14,33,"date"),": "),i(3),c(K(17,35,t.order.created_at,"dd MMM yyyy hh:mm:a")),i(2),h(t.order!=null&&t.order.is_digital_only?-1:18),i(2),m("",s(21,38,"email"),": "),i(3),c(t.order==null||t.order.consumer==null?null:t.order.consumer.email),i(2),m("",s(26,40,"phone"),": "),i(3),c(t.order==null||t.order.shipping_address==null?null:t.order.shipping_address.phone),i(2),m("",s(31,42,"customer"),": "),i(3),c(t.order==null||t.order.consumer==null?null:t.order.consumer.name),i(5),m("",s(39,44,"qty"),"."),i(3),c(s(42,46,"product_name")),i(3),c(s(45,48,"price")),i(3),$(t.order==null?null:t.order.products),i(4),m("",s(52,50,"total"),":"),i(3),c(s(55,52,t.order!=null&&t.order.amount?t.order==null?null:t.order.amount:0)),i(2),h(t.order!=null&&t.order.is_digital_only?-1:56),i(3),m("",s(60,54,"tax"),":"),i(3),m(" ",s(63,56,t.order!=null&&t.order.tax_total?t.order==null?null:t.order.tax_total:0)," "),i(4),m("",s(67,58,"discount"),":"),i(3),m(" ",s(70,60,t.order!=null&&t.order.coupon_total_discount?t.order==null?null:t.order.coupon_total_discount:0)," "),i(4),m("",s(74,62,"grandtotal"),":"),i(3),c(s(77,64,t.order!=null&&t.order.total?t.order==null?null:t.order.total:0)),i(3),c(s(80,66,"thank_you_for_shopping")),i(4),m(" ",s(84,68,"print")," "),i(3),m(" ",s(87,70,"cancel")," ")}}var Je=(()=>{let u=class u{constructor(){this.modalService=y(J),this.modalOpen=!1,this.PosInvoice=P("posInvoice"),this.setting$=y(D).select(Ae.setting)}openModal(t){return q(this,null,function*(){this.order=t,this.modalOpen=!0,this.modalService.open(this.PosInvoice(),{ariaLabelledBy:"add-customer-Modal",centered:!0,windowClass:"theme-modal modal-sm invoice-modal"}).result.then(p=>{`${p}`},p=>{this.closeResult=`Dismissed ${this.getDismissReason(p)}`})})}getDismissReason(t){return t===V.ESC?"by pressing ESC":t===V.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}};u.\u0275fac=function(p){return new(p||u)},u.\u0275cmp=k({type:u,selectors:[["app-pos-invoice-modal"]],viewQuery:function(p,n){p&1&&T(n.PosInvoice,nt,5),p&2&&O()},decls:2,vars:0,consts:[["posInvoice",""],[1,"modal-body"],[1,"ticket"],["id","DivIdToPrint"],[1,"title-text","text-center"],[1,"centered"],[1,"table"],[1,"quantity"],[1,"description"],[1,"price"],[1,"total-box"],["colspan","2",1,"text-end","description"],[1,"text-point"],[1,"modal-btn-group","d-flex","align-items-center","gap-2","justify-content-center"],["printSectionId","DivIdToPrint","ngxPrint","",1,"btn","btn-sm","btn-animation","print-btn"],[1,"btn","btn-sm","btn-light-bg",3,"click"]],template:function(p,n){p&1&&W(0,dt,88,72,"ng-template",null,0,z)},dependencies:[G,j,Ge,Ze,Z,E,R,X],encapsulation:2});let l=u;return l})();var st=["posInvoice"],pt=["shippingNote"],ut=l=>({"d-none":l}),ct=()=>[],mt=l=>["/order/details",l],le=(l,u)=>u.id;function _t(l,u){if(l&1&&(r(0,"span",24),a(1),o()),l&2){let e=_().$implicit;i(),c(e.activities_date)}}function vt(l,u){if(l&1&&(r(0,"li",19)(1,"div",20)(2,"div",21),x(3,"img",22),o(),r(4,"div")(5,"div",23),a(6),d(7,"titlecase"),o(),v(8,_t,2,1,"span",24),o()()()),l&2){let e=u.$implicit,t=_(2);fe("active",(e==null?null:e.sequence)<=(t.order==null||t.order.order_status==null?null:t.order.order_status.sequence)),g("ngClass",ee(9,ut,(e==null?null:e.sequence)>=(t.order==null||t.order.order_status==null?null:t.order.order_status.sequence)&&(t.order==null||t.order.order_status==null?null:t.order.order_status.slug)==="cancelled"||(e==null?null:e.slug)==="cancelled"||(t.order==null?null:t.order.is_digital_only)&&((e==null?null:e.slug)==="shipped"||(e==null?null:e.slug)==="out-for-delivery"))),i(3),g("src",A("assets/svg/tracking/",e==null?null:e.slug,".svg"),Q),i(3),c(s(7,7,e==null?null:e.name.replaceAll("_"," "))),i(2),h((e==null?null:e.sequence)<=(t.order==null||t.order.order_status==null?null:t.order.order_status.sequence)&&e.activities_date?8:-1)}}function ht(l,u){if(l&1&&(r(0,"li",18)(1,"div",20)(2,"div",21),x(3,"img",22),o(),r(4,"div",23),a(5),d(6,"titlecase"),o()()()),l&2){let e=_(2);i(3),g("src",A("assets/svg/tracking/",e.order==null||e.order.order_status==null?null:e.order.order_status.slug,".svg"),Q),i(2),m(" ",s(6,3,e.order==null||e.order.order_status==null||e.order.order_status.name==null?null:e.order.order_status.name.replaceAll("_"," "))," ")}}function gt(l,u){if(l&1&&(r(0,"div",4)(1,"div",16)(2,"ul"),N(3,vt,9,11,"li",17,le),d(5,"async"),v(6,ht,7,5,"li",18),o()()()),l&2){let e,t=_();i(3),$((e=s(5,1,t.orderStatus$))==null?null:e.data),i(3),h((t.order==null||t.order.order_status==null?null:t.order.order_status.slug)==="cancelled"?6:-1)}}function yt(l,u){if(l&1){let e=M();r(0,"select2",26),d(1,"async"),d(2,"async"),d(3,"translate"),S("update",function(p){C(e);let n=_(2);return w(n.updateOrderStatus(p))}),o()}if(l&2){let e,t=_(2);g("data",(e=s(1,3,t.orderStatuses$))!=null&&e.length?s(2,5,t.orderStatuses$):Ie(9,ct))("placeholder",s(3,7,"select_status"))("value",t.order==null||t.order.order_status==null?null:t.order.order_status.id)}}function ft(l,u){if(l&1&&(r(0,"div",6),v(1,yt,4,10,"select2",25),o()),l&2){let e=_();i(),h(e.isBrowser?1:-1)}}function xt(l,u){if(l&1&&(r(0,"tr")(1,"td",27),x(2,"img",28),o(),r(3,"td")(4,"h6"),a(5),o()(),r(6,"td")(7,"h6"),a(8),d(9,"currencySymbol"),o()(),r(10,"td")(11,"h6"),a(12),o()(),r(13,"td")(14,"h6"),a(15),d(16,"currencySymbol"),o()()()),l&2){let e=u.$implicit;i(2),g("src",!(e==null||e.pivot==null)&&e.pivot.variation&&(!(e==null||e.pivot==null||e.pivot.variation==null)&&e.pivot.variation.variation_image)?e==null||e.pivot==null||e.pivot.variation==null||e.pivot.variation.variation_image==null?null:e.pivot.variation.variation_image.original_url:e!=null&&e.product_thumbnail?e==null||e.product_thumbnail==null?null:e.product_thumbnail.original_url:"assets/images/product.png",Q),i(3),m(" ",!(e==null||e.pivot==null)&&e.pivot.variation?e==null||e.pivot==null||e.pivot.variation==null?null:e.pivot.variation.name:e==null?null:e.name," "),i(3),m(" ",s(9,5,!(e==null||e.pivot==null)&&e.pivot.wholesale_price?e==null||e.pivot==null?null:e.pivot.wholesale_price:e==null||e.pivot==null?null:e.pivot.single_price)," "),i(4),c(e==null||e.pivot==null?null:e.pivot.quantity),i(3),c(s(16,7,e==null||e.pivot==null?null:e.pivot.subtotal))}}function St(l,u){if(l&1&&(r(0,"h6"),a(1),d(2,"currencySymbol"),o()),l&2){let e=_().$implicit;i(),c(s(2,1,e==null?null:e.amount))}}function bt(l,u){if(l&1&&(r(0,"tr")(1,"td")(2,"h6",31),a(3),o()(),r(4,"td")(5,"h6"),a(6),d(7,"date"),o()(),r(8,"td"),v(9,St,3,3,"h6"),o(),r(10,"td")(11,"h6")(12,"div")(13,"span"),a(14),o()()()(),r(15,"td")(16,"a",32),x(17,"i"),o()()()),l&2){let e=u.$implicit,t=_(2);i(3),c("#"+(e==null?null:e.order_number)),i(3),c(K(7,10,e==null?null:e.created_at,"dd MMM yyyy hh:mm a")),i(3),h(t.isBrowser?9:-1),i(3),F(A("status-",e==null?null:e.order_status.slug)),i(2),c(e==null?null:e.order_status.name),i(2),g("routerLink",ee(13,mt,e==null?null:e.order_number)),i(),F("ri-eye-line")}}function It(l,u){if(l&1&&(r(0,"app-page-wrapper",5)(1,"div",29)(2,"table",30)(3,"thead")(4,"tr")(5,"th",9),a(6),d(7,"translate"),o(),r(8,"th",9),a(9),d(10,"translate"),o(),r(11,"th",9),a(12),d(13,"translate"),o(),r(14,"th",9),a(15),d(16,"translate"),o(),r(17,"th",9),a(18),d(19,"translate"),o()()(),r(20,"tbody"),N(21,bt,18,15,"tr",null,le),o()()()()),l&2){let e=_();g("gridClass","col-sm-12")("title","order_details"),i(6),c(s(7,7,"order_number")),i(3),c(s(10,9,"order_date")),i(3),c(s(13,11,"total_amount")),i(3),c(s(16,13,"status")),i(3),c(s(19,15,"action")),i(3),$(e.order==null?null:e.order.sub_orders)}}function Ct(l,u){if(l&1){let e=M();r(0,"div",12)(1,"a",33),S("click",function(){C(e);let p=_(),n=U(91);return w(n.openModal(p.order))}),a(2,"Receipt"),o(),r(3,"a",34),S("click",function(){C(e);let p=_();return w(p.download(p.order.order_number))}),a(4),d(5,"translate"),o()()}l&2&&(i(4),m("",s(5,1,"invoice")," "))}function wt(l,u){if(l&1&&(r(0,"li"),a(1),d(2,"translate"),r(3,"span"),a(4),d(5,"currencySymbol"),o()()),l&2){let e=_();i(),m(" ",s(2,2,"shipping")," "),i(3),c(s(5,4,e.order!=null&&e.order.shipping_total?e.order==null?null:e.order.shipping_total:0))}}function Et(l,u){if(l&1&&(r(0,"li",14),a(1),d(2,"translate"),r(3,"span"),a(4),d(5,"currencySymbol"),o()()),l&2){let e=_();i(),m(" ",s(2,2,"points")," "),i(3),c(s(5,4,e.order==null?null:e.order.points_amount))}}function Bt(l,u){if(l&1&&(r(0,"li",14),a(1),d(2,"translate"),r(3,"span"),a(4),d(5,"currencySymbol"),o()()),l&2){let e=_();i(),m(" ",s(2,2,"wallet_balance")," "),i(3),c(s(5,4,e.order==null?null:e.order.wallet_balance))}}function Dt(l,u){if(l&1&&(r(0,"li",14),a(1),d(2,"translate"),r(3,"span"),a(4),d(5,"currencySymbol"),o()()),l&2){let e=_();i(),m(" ",s(2,2,"discount")," "),i(3),c(s(5,4,e.order==null?null:e.order.coupon_total_discount))}}function Mt(l,u){if(l&1&&(r(0,"li")(1,"label"),a(2),d(3,"translate"),o(),r(4,"h4"),a(5),x(6,"br"),a(7),d(8,"translate"),o()()),l&2){let e=_();i(2),m("",s(3,9,"shipping_address"),":"),i(3),H(" ",e.order==null||e.order.shipping_address==null?null:e.order.shipping_address.street," ",e.order==null||e.order.shipping_address==null?null:e.order.shipping_address.city," ",e.order==null||e.order.shipping_address==null||e.order.shipping_address.state==null?null:e.order.shipping_address.state.name," ",e.order==null||e.order.shipping_address==null||e.order.shipping_address.country==null?null:e.order.shipping_address.country.name," ",e.order==null||e.order.shipping_address==null?null:e.order.shipping_address.pincode," "),i(2),Y(" ",s(8,11,"phone")," : +",e.order==null||e.order.shipping_address==null?null:e.order.shipping_address.country_code," ",e.order==null||e.order.shipping_address==null?null:e.order.shipping_address.phone," ")}}function Tt(l,u){if(l&1&&(r(0,"li")(1,"label"),a(2),d(3,"translate"),o(),r(4,"h4"),a(5),o()()),l&2){let e=_();i(2),m("",s(3,2,"delivery_slot"),":"),i(3),c(e.order==null?null:e.order.delivery_description)}}var Bi=(()=>{let u=class u{constructor(){this.store=y(D),this.datePipe=y(E),this.route=y(De),this.orderStatus$=y(D).select(te.orderStatus),this.orderStatuses$=y(D).select(te.orderStatuses),this.PosInvoice=P("posInvoice"),this.ShippingNote=P("shippingNote"),this.statuses=[],this.destroy$=new re;let t=y(_e);this.isBrowser=Be(t),this.store.dispatch(new Ue),this.init=!0}ngOnInit(){this.route.params.pipe(de(t=>t.id?this.store.dispatch(new Le(t.id)).pipe(oe(()=>this.store.select(We.selectedOrder))):ae()),se(this.destroy$)).subscribe(t=>{this.order=t,this.order&&this.order?.order_status_activities&&this.order?.order_status_activities?.map(p=>{this.orderStatus$.subscribe(n=>{n.data.map(f=>{if(p.status==f.name){let B=this.datePipe.transform(p?.changed_at,"dd MMM yyyy");f.activities_date=B}})})})})}updateOrderStatus(t){t&&t?.value&&(this.init||this.ShippingNote().openModal(this.order?.id,Number(t.value)),this.init=!1)}getDate(t,p){return p?.map(f=>{let B=this.datePipe.transform(f?.changed_at,"dd MMM yyyy hh:mm:a");return t===f.status?B:" "})}ngOnDestroy(){this.statuses=[],this.destroy$.next(),this.destroy$.complete()}download(t){this.store.dispatch(new Qe({order_number:t}))}};u.\u0275fac=function(p){return new(p||u)},u.\u0275cmp=k({type:u,selectors:[["app-details"]],viewQuery:function(p,n){p&1&&(T(n.PosInvoice,st,5),T(n.ShippingNote,pt,5)),p&2&&O(2)},features:[be([E])],decls:94,vars:78,consts:[["posInvoice",""],["shippingNote",""],[1,"row","g-2"],[1,"col-xxl-9"],[1,"mb-4"],[3,"gridClass","title"],["button",""],[1,"tracking-wrapper","table-responsive"],[1,"table","product-table","theme-table"],["scope","col"],[1,"col-xxl-3"],[1,"sticky-top-sec"],["button","",1,"d-flex","gap-2"],[1,"tracking-total","tracking-wrapper"],[1,"txt-primary","fw-bold"],[1,"customer-detail","tracking-wrapper"],[1,"tracking-panel"],[3,"active","ngClass"],[1,"active","cancelled-box"],[3,"ngClass"],[1,"panel-content"],[1,"icon"],["alt","image",1,"img-fluid",3,"src"],[1,"status"],[1,"panel-content-sm"],[1,"custom-select","min-w-cls",3,"data","placeholder","value"],[1,"custom-select","min-w-cls",3,"update","data","placeholder","value"],[1,"product-image"],["alt","product",1,"img-fluid",3,"src"],[1,"table-responsive"],[1,"table","all-package","theme-table","no-footer"],[1,"fw-bold"],["href","javascript:void(0)",3,"routerLink"],[1,"btn","btn-light-bg","btn-sm","ms-auto",3,"click"],["download","download",1,"btn","btn-animation","btn-sm","ms-auto",3,"click"]],template:function(p,n){p&1&&(r(0,"div",2)(1,"div",3),v(2,gt,7,3,"div",4),r(3,"app-page-wrapper",5),d(4,"translate"),v(5,ft,2,1,"div",6),r(6,"div",7)(7,"table",8)(8,"thead")(9,"tr")(10,"th",9),a(11),d(12,"translate"),o(),r(13,"th",9),a(14),d(15,"translate"),o(),r(16,"th",9),a(17),d(18,"translate"),o(),r(19,"th",9),a(20),d(21,"translate"),o(),r(22,"th",9),a(23),d(24,"translate"),o()()(),r(25,"tbody"),N(26,xt,17,9,"tr",null,le),o()()()(),v(28,It,23,17,"app-page-wrapper",5),o(),r(29,"div",10)(30,"div",11)(31,"app-page-wrapper",5),v(32,Ct,6,3,"div",12),r(33,"div",13)(34,"ul")(35,"li"),a(36),d(37,"translate"),r(38,"span"),a(39),d(40,"currencySymbol"),o()(),v(41,wt,6,6,"li"),r(42,"li"),a(43),d(44,"translate"),r(45,"span"),a(46),d(47,"currencySymbol"),o()(),v(48,Et,6,6,"li",14),v(49,Bt,6,6,"li",14),v(50,Dt,6,6,"li",14),r(51,"li"),a(52),d(53,"translate"),r(54,"span"),a(55),d(56,"currencySymbol"),o()()()()(),r(57,"app-page-wrapper",5)(58,"div",15)(59,"ul")(60,"li")(61,"label"),a(62),d(63,"translate"),o(),r(64,"h4"),a(65),o()(),r(66,"li")(67,"label"),a(68),d(69,"translate"),o(),r(70,"h4"),a(71),o()(),r(72,"li")(73,"label"),a(74),d(75,"translate"),o(),r(76,"h4"),a(77),x(78,"br"),a(79),d(80,"translate"),o()(),v(81,Mt,9,13,"li"),v(82,Tt,6,4,"li"),r(83,"li")(84,"label"),a(85),d(86,"translate"),o(),r(87,"h4"),a(88),d(89,"uppercase"),o()()()()()()()(),x(90,"app-pos-invoice-modal",null,0)(92,"app-shipping-note-modal",null,1)),p&2&&(i(2),h(!(n.order==null||n.order.sub_orders==null)&&n.order.sub_orders.length?-1:2),i(),g("gridClass","col-sm-12")("title",s(4,42,"order_number")+": #"+(n.order==null?null:n.order.order_number)),i(2),h(!(!(n.order==null||n.order.sub_orders==null)&&n.order.sub_orders.length)&&(n.order==null||n.order.order_status==null?null:n.order.order_status.slug)!=="cancelled"&&(n.order==null||n.order.order_status==null?null:n.order.order_status.slug)!=="delivered"?5:-1),i(6),c(s(12,44,"image")),i(3),c(s(15,46,"name")),i(3),c(s(18,48,"price")),i(3),c(s(21,50,"quantity")),i(3),c(s(24,52,"subtotal")),i(3),$(n.order==null?null:n.order.products),i(2),h(!(n.order==null||n.order.sub_orders==null)&&n.order.sub_orders.length?28:-1),i(3),g("gridClass","col-sm-12")("title","summary"),i(),h(n.order!=null&&n.order.invoice_url?32:-1),i(4),m(" ",s(37,54,"subtotal")," "),i(3),c(s(40,56,n.order!=null&&n.order.amount?n.order==null?null:n.order.amount:0)),i(2),h(n.order!=null&&n.order.is_digital_only?-1:41),i(2),m(" ",s(44,58,"tax")," "),i(3),c(s(47,60,n.order!=null&&n.order.tax_total?n.order==null?null:n.order.tax_total:0)),i(2),h((n.order==null?null:n.order.points_amount)!==0?48:-1),i(),h((n.order==null?null:n.order.wallet_balance)!==0?49:-1),i(),h((n.order==null?null:n.order.coupon_total_discount)!==0?50:-1),i(2),m(" ",s(53,62,"total")," "),i(3),c(s(56,64,n.order!=null&&n.order.total?n.order==null?null:n.order.total:0)),i(2),g("gridClass","col-sm-12")("title","consumer_details"),i(5),m("",s(63,66,"name"),":"),i(3),c(n.order==null||n.order.consumer==null?null:n.order.consumer.name),i(3),m("",s(69,68,"email_address"),":"),i(3),c(n.order==null||n.order.consumer==null?null:n.order.consumer.email),i(3),m("",s(75,70,"billing_address"),":"),i(3),H(" ",n.order==null||n.order.billing_address==null?null:n.order.billing_address.street," ",n.order==null||n.order.billing_address==null?null:n.order.billing_address.city," ",n.order==null||n.order.billing_address==null||n.order.billing_address.state==null?null:n.order.billing_address.state.name," ",n.order==null||n.order.billing_address==null||n.order.billing_address.country==null?null:n.order.billing_address.country.name," ",n.order==null||n.order.billing_address==null?null:n.order.billing_address.pincode," "),i(2),Y(" ",s(80,72,"phone")," : +",n.order==null||n.order.shipping_address==null?null:n.order.shipping_address.country_code," ",n.order==null||n.order.billing_address==null?null:n.order.billing_address.phone," "),i(2),h(n.order!=null&&n.order.is_digital_only?-1:81),i(),h(n.order!=null&&n.order.is_digital_only?-1:82),i(3),m("",s(86,74,"payment_mode"),":"),i(3),c(s(89,76,n.order==null?null:n.order.payment_method)))},dependencies:[G,Ce,j,Re,Ve,Te,Me,je,Je,ze,Z,Ee,we,E,R,X],encapsulation:2});let l=u;return l})();export{Bi as Details};

import{a as ue,h as _e}from"./chunk-6GVVJ3D4.js";import{a as se,b as pe}from"./chunk-G4WEVRSH.js";import{a as le}from"./chunk-Y2Z4WWCH.js";import{l as re,m as ne}from"./chunk-HMBOAMDM.js";import{a as fe}from"./chunk-JCQMHXSD.js";import{b as de,c as me,d as ce}from"./chunk-KRRVKEPJ.js";import{a as ae}from"./chunk-MLWMDQKS.js";import{B as Z,C as ee,D as ie,c as L,d as z,e as _,g as H,h as K,k as C,m as Q,n as W,q as X,qa as x,t as Y}from"./chunk-IKKQDHIF.js";import{e as j,g as J}from"./chunk-OTODDIHK.js";import{c as te,d as oe}from"./chunk-AWERIOQH.js";import{Ad as P,Bc as w,Cc as $,Ed as O,Fc as k,Ib as c,Ja as T,Kb as f,Lc as a,Mc as l,Pb as p,Pc as V,Qb as o,Rb as n,Sb as h,Y as E,Yc as D,Z as U,bb as i,bc as I,dc as b,g,ja as y,mc as A,n as B,ob as M,qc as R,rc as u,sc as v,t as q,tc as S,td as G,ub as N,x as F}from"./chunk-KIZZVTEV.js";var he=()=>[];function ve(e,r){e&1&&(o(0,"div",4),u(1),a(2,"translate"),n()),e&2&&(i(),v(l(2,1,"name_is_required")))}function Ce(e,r){e&1&&(o(0,"div",4),u(1),a(2,"translate"),n()),e&2&&(i(),v(l(2,1,"email_is_required")))}function we(e,r){e&1&&(o(0,"div",4),u(1),a(2,"translate"),n()),e&2&&(i(),v(l(2,1,"enter_valid_email")))}function ye(e,r){if(e&1&&(o(0,"div",15)(1,"div",16),h(2,"div"),n(),o(3,"span",17),u(4),n()()),e&2){let s=r.data;i(2),R($("iti-flag ",s==null?null:s.class)),i(2),v(s.code)}}function be(e,r){if(e&1&&(o(0,"select2",6),a(1,"translate"),N(2,ye,5,4,"ng-template",null,0,V),n()),e&2){let s=A(3),m=b();p("noResultMessage",w(l(1,4,"no_data_found")))("templates",s)("data",m.codes)}}function Se(e,r){e&1&&(o(0,"div",8),u(1),a(2,"translate"),n()),e&2&&(i(),S(" ",l(2,1,"phone_number_is_required")," "))}function xe(e,r){e&1&&(o(0,"div",4),u(1),a(2,"translate"),n()),e&2&&(i(),v(l(2,1,"phone_number_is_invalid")))}function ge(e,r){e&1&&(o(0,"div",8),u(1),a(2,"translate"),n()),e&2&&(i(),S(" ",l(2,1,"password_is_required")," "))}function Be(e,r){e&1&&(o(0,"div",8),u(1),a(2,"translate"),n()),e&2&&(i(),S(" ",l(2,1,"confirm_password_is_required")," "))}function qe(e,r){e&1&&(o(0,"div",4),u(1),a(2,"translate"),n()),e&2&&(i(),v(l(2,1,"confirm_password_does_not_matched")))}function Fe(e,r){if(e&1&&c(0,qe,3,3,"div",4),e&2){let s=b(2);f(s.passwordMatchError?0:-1)}}function Ee(e,r){if(e&1&&(o(0,"app-form-fields",2),h(1,"input",18),a(2,"translate"),c(3,ge,3,3,"div",8),n(),o(4,"app-form-fields",2),h(5,"input",19),a(6,"translate"),c(7,Be,3,3,"div",8)(8,Fe,1,1),n()),e&2){let s=b();p("label","password")("for","password")("required",!0),i(),p("placeholder",w(l(2,12,"enter_password"))),i(2),f(s.form.controls.password.touched&&(s.form.controls.password.errors!=null&&s.form.controls.password.errors.required)?3:-1),i(),p("label","confirm_password")("for","password_confirmation")("required",!0),i(),p("placeholder",w(l(6,14,"enter_confirm_password"))),i(2),f(s.form.controls.password_confirmation.touched&&(s.form.controls.password_confirmation.errors!=null&&s.form.controls.password_confirmation.errors.required)?7:8)}}function Ue(e,r){if(e&1&&(h(0,"select2",9),a(1,"translate"),a(2,"async"),a(3,"async"),a(4,"translate")),e&2){let s,m=b();p("noResultMessage",w(l(1,4,"no_data_found")))("data",(s=l(2,6,m.role$))!=null&&s.length?l(3,8,m.role$):k(12,he))("placeholder",l(4,10,"select_role"))}}function Te(e,r){e&1&&(o(0,"div",4),u(1),a(2,"translate"),n()),e&2&&(i(),v(l(2,1,"role_is_required")))}var ei=(()=>{let r=class r{constructor(){this.store=y(x),this.route=y(j),this.router=y(J),this.formBuilder=y(Z),this.type=D(void 0),this.role$=y(x).select(_e.roles),this.codes=se,this.destroy$=new g;let m=y(T);this.isBrowser=O(m),this.form=this.formBuilder.group({name:new C("",[_.required]),email:new C("",[_.required,_.email]),phone:new C("",[_.required,_.pattern(/^[0-9]*$/)]),country_code:new C("1",[_.required]),role_id:new C("",[_.required]),password:new C("",[_.required]),password_confirmation:new C("",[_.required]),status:new C(1)},{validator:pe.MatchValidator("password","password_confirmation")})}get passwordMatchError(){return this.form.getError("mismatch")&&this.form.get("password_confirmation")?.touched}ngOnInit(){let m=this.store.dispatch(new ue);this.route.params.pipe(E(d=>d.id?this.store.dispatch(new me(d.id)).pipe(q(()=>this.store.select(fe.selectedUser))):B()),U(this.destroy$)).subscribe(d=>{this.id=d?.id,F([m]).subscribe({complete:()=>{this.form.patchValue({name:d?.name,email:d?.email,phone:d?.phone,country_code:d?.country_code,role_id:d?.role?d?.role.id:null,status:d?.status})}})})}submit(){this.form.markAllAsTouched();let m=new de(this.form.value);this.type()=="edit"&&this.id&&(this.form.removeControl("password"),this.form.removeControl("password_confirmation"),m=new ce(this.form.value,this.id)),this.form.valid&&this.store.dispatch(m).subscribe({complete:()=>{this.router.navigateByUrl("/user")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};r.\u0275fac=function(d){return new(d||r)},r.\u0275cmp=M({type:r,selectors:[["app-form-user"]],inputs:{type:[1,"type"]},decls:28,vars:41,consts:[["template",""],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","name","formControlName","name",1,"form-control",3,"placeholder"],[1,"invalid-feedback"],["type","email","name","email","formControlName","email",1,"form-control",3,"placeholder"],["formControlName","country_code",1,"custom-select","intl-tel-input",3,"templates","data","noResultMessage"],["type","number","formControlName","phone","name","phone",1,"form-control","intl-input-padding",3,"placeholder"],["autocomplete","false",1,"invalid-feedback"],["formControlName","role_id",1,"custom-select",3,"data","placeholder","noResultMessage"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"country"],[1,"flag-box"],[1,"dial-code"],["type","password","name","password","formControlName","password",1,"form-control",3,"placeholder"],["type","password","name","password_confirmation","formControlName","password_confirmation",1,"form-control",3,"placeholder"]],template:function(d,t){d&1&&(o(0,"form",1),I("ngSubmit",function(){return t.submit()}),o(1,"app-form-fields",2),h(2,"input",3),a(3,"translate"),c(4,ve,3,3,"div",4),n(),o(5,"app-form-fields",2),h(6,"input",5),a(7,"translate"),c(8,Ce,3,3,"div",4),c(9,we,3,3,"div",4),n(),o(10,"app-form-fields",2),c(11,be,4,6,"select2",6),h(12,"input",7),a(13,"translate"),c(14,Se,3,3,"div",8),c(15,xe,3,3,"div",4),n(),c(16,Ee,9,16),o(17,"app-form-fields",2),c(18,Ue,5,13,"select2",9),c(19,Te,3,3,"div",4),n(),o(20,"app-form-fields",2)(21,"div",10)(22,"label",11),h(23,"input",12)(24,"span",13),n()()(),o(25,"app-button",14),u(26),a(27,"translate"),n()()),d&2&&(p("formGroup",t.form),i(),p("label","name")("for","name")("required",!0),i(),p("placeholder",w(l(3,33,"enter_full_name"))),i(2),f(t.form.controls.name.touched&&(t.form.controls.name.errors!=null&&t.form.controls.name.errors.required)?4:-1),i(),p("label","email")("for","email")("required",!0),i(),p("placeholder",w(l(7,35,"enter_email"))),i(2),f(t.form.controls.email.touched&&(t.form.controls.email.errors!=null&&t.form.controls.email.errors.required)?8:-1),i(),f(t.form.controls.email.touched&&(t.form.controls.email.errors!=null&&t.form.controls.email.errors.email)?9:-1),i(),p("label","phone")("for","phone")("required",!0),i(),f(t.isBrowser?11:-1),i(),p("placeholder",w(l(13,37,"enter_phone"))),i(2),f(t.form.controls.phone.touched&&(t.form.controls.phone.errors!=null&&t.form.controls.phone.errors.required)?14:-1),i(),f(t.form.controls.phone.touched&&(t.form.controls.phone.errors!=null&&t.form.controls.phone.errors.pattern)?15:-1),i(),f(t.type()!=="edit"?16:-1),i(),p("label","role")("for","role")("required",!0),i(),f(t.isBrowser?18:-1),i(),f(t.form.controls.role_id.touched&&(t.form.controls.role_id.errors!=null&&t.form.controls.role_id.errors.required)?19:-1),i(),p("label","status")("for","status")("required",!1),i(5),p("id","user_btn"),i(),v(l(27,39,t.type()==="create"?"save_user":"update_user")))},dependencies:[oe,ee,Q,z,W,L,H,K,ie,X,Y,ne,re,P,ae,le,te,G],encapsulation:2});let e=r;return e})();export{ei as a};

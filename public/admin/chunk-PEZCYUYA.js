import{a as y,g as U,h as W}from"./chunk-UJOUVEQA.js";import{a as G}from"./chunk-GJUMWKSA.js";import"./chunk-6TS3CAIM.js";import"./chunk-2MGWSW7E.js";import"./chunk-YJGMUJNE.js";import{a as O}from"./chunk-3ARB4UI6.js";import"./chunk-HD5XXWEJ.js";import"./chunk-HJPVTB2W.js";import"./chunk-MLWMDQKS.js";import{a as j}from"./chunk-MPC4A6Z2.js";import"./chunk-Q3XL2YFP.js";import{f as z}from"./chunk-5DTRVH74.js";import{qa as g}from"./chunk-IKKQDHIF.js";import{g as L,h as B,l as H}from"./chunk-OTODDIHK.js";import"./chunk-EY6JDCC6.js";import{c as I,d as R}from"./chunk-AWERIOQH.js";import{Ad as D,Fc as v,Ib as u,Kb as f,Lc as h,Mc as x,Nb as N,Ob as k,Pb as l,Qb as s,Rb as c,Sb as C,Ya as T,Yb as S,_b as $,bb as r,bc as E,dc as p,ja as d,ob as P,oc as A,qa as m,ra as _,rc as w,sc as F,tc as M,td as V,ub as b}from"./chunk-KIZZVTEV.js";import"./chunk-4CLCTAJ7.js";var q=()=>["notice.create","notice.destroy","notice.index"],J=()=>["/notice/create"],K=(t,n)=>n.id;function Q(t,n){t&1&&(s(0,"div",4)(1,"a",5),C(2,"i",6),w(3),h(4,"translate"),c()()),t&2&&(r(),l("routerLink",v(4,J)),r(2),M(" ",x(4,2,"add_notice")," "))}function X(t,n){if(t&1){let i=$();s(0,"app-page-wrapper",1),b(1,Q,5,5,"div",2),s(2,"app-table",3),E("tableChanged",function(a){m(i);let o=p();return _(o.onTableChange(a))})("rowClicked",function(a){m(i);let o=p();return _(o.edit(a))})("action",function(a){m(i);let o=p();return _(o.onActionClicked(a))}),c()()}if(t&2){let i=p();l("gridClass","col-sm-12")("title","notices"),r(),l("hasPermission","notice.create"),r(),l("tableConfig",i.tableConfig)("hasCheckbox",!1)}}function Y(t,n){if(t&1&&(s(0,"li",9)(1,"div",10)(2,"div",11),C(3,"i",12),c(),s(4,"div",13)(5,"h3"),w(6),c(),C(7,"p",14),c()()()),t&2){let i=n.$implicit;A("warning",i.priority==="low"),r(6),F(i==null?null:i.title),r(),l("innerHTML",i==null?null:i.description,T)}}function Z(t,n){if(t&1&&(s(0,"ul",7),N(1,Y,8,4,"li",8,K),h(3,"async"),c()),t&2){let i,e=p(3);r(),k((i=x(3,0,e.notice$))==null?null:i.data)}}function ee(t,n){if(t&1&&(s(0,"app-page-wrapper",1),u(1,Z,4,2,"ul",7),h(2,"async"),c()),t&2){let i,e=p(2);l("gridClass","col-xxl-8 m-auto")("title","Notice"),r(),f(!((i=x(2,3,e.notice$))==null||i.data==null)&&i.data.length?1:-1)}}function te(t,n){if(t&1&&u(0,ee,3,5,"app-page-wrapper",1),t&2){let i=p();f(!i.hasPermission("notice.create")&&!i.hasPermission("notice.destroy")?0:-1)}}var xe=(()=>{let n=class n{constructor(){this.store=d(g),this.router=d(L),this.notice$=d(g).select(W.notice),this.permissions$=d(g).select(z.permissions),this.permissions=[],this.tableConfig={columns:[{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"priority",dataField:"badge"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"notice.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"notice.destroy"}],data:[],total:0}}ngOnInit(){this.role=this.store.selectSnapshot(e=>e.account&&e.account.roleName),this.role!=="admin"&&this.store.dispatch(new y),this.notice$.subscribe(e=>{let a=e?.data?.filter(o=>(o.badge=o.priority?`<div class="status-${o.priority}"><span>${o.priority}</span></div>`:"-",o));this.tableConfig.data=e?a:[],this.tableConfig.total=e?e?.total:0})}hasPermission(e){return this.permissions$.subscribe(a=>this.permissions=a?.map(o=>o?.name)),this.permissions.includes(e)}onTableChange(e){this.store.dispatch(new y(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="delete"&&this.delete(e.data)}edit(e){this.router.navigateByUrl(`/notice/edit/${e.id}`)}delete(e){this.store.dispatch(new U(e.id))}};n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=P({type:n,selectors:[["app-notice"]],decls:3,vars:3,consts:[[3,"gridClass","title",4,"hasPermission"],[3,"gridClass","title"],["class","d-flex flex-wrap gap-2","button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button","",1,"d-flex","flex-wrap","gap-2"],[1,"align-items-center","btn","btn-theme",3,"routerLink"],[1,"ri-add-line"],[1,"notification-setting","notification-page"],[1,"notice-section",3,"warning"],[1,"notice-section"],[1,"notice-content"],[1,"icon-box"],[1,"ri-error-warning-line"],[1,"notice-box"],[3,"innerHTML"]],template:function(a,o){a&1&&(b(0,X,3,5,"app-page-wrapper",0),u(1,te,1,1),S(2)),a&2&&(l("hasPermission",v(2,q)),r(),f(o.role!=="admin"?1:-1))},dependencies:[D,R,H,B,O,j,G,V,I],encapsulation:2});let t=n;return t})();export{xe as Notice};

import{C as H,D as J,d as R,g as z,k as U,p as G}from"./chunk-IKKQDHIF.js";import{c as W,d as X}from"./chunk-AWERIOQH.js";import{$b as Q,Bc as q,Ca as L,Ib as v,Kb as y,Lc as D,Mb as V,Mc as x,Nb as S,Ob as T,Pb as O,Qb as d,Rb as u,Sb as M,Tb as w,Ub as f,Vb as N,Xc as k,Yc as l,Za as j,Zc as K,_b as m,bb as r,bc as h,cc as F,dc as a,kc as E,lc as $,ob as A,oc as b,qa as c,ra as p,rc as _,sc as C,tc as I}from"./chunk-KIZZVTEV.js";function ee(n,s){if(n&1&&(w(0,"div",0),N(1,"img",3),f()),n&2){let o,e=a();r(),Q("src",(o=e.data())!=null&&o.category_icon?(o=e.data())==null?null:o.category_icon.original_url:"assets/images/category.png",j)}}function te(n,s){if(n&1){let o=m();w(0,"a",4),F("click",function(t){c(o);let i=a();return p(i.onArrowClick(t,i.data()))}),N(1,"i",5),f()}}var Y=(()=>{let s=class s{constructor(){this.data=l(void 0),this.selectedPillIds=l(void 0),this.parentId=l(void 0),this.key=l(void 0),this.subArrayKey=l(void 0),this.showImage=l(void 0),this.selected=k(),this.subItemClicked=k()}select(e){e.selected=!e.selected,this.selected.emit(e)}onArrowClick(e,t){e.stopPropagation(),this.subItemClicked.emit(t)}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=A({type:s,selectors:[["app-dropdown-list"]],inputs:{data:[1,"data"],selectedPillIds:[1,"selectedPillIds"],parentId:[1,"parentId"],key:[1,"key"],subArrayKey:[1,"subArrayKey"],showImage:[1,"showImage"]},outputs:{selected:"selected",subItemClicked:"subItemClicked"},decls:6,vars:6,consts:[[1,"image"],["href","javascript:void(0)",1,"select-btn",3,"click"],["href","javascript:void(0)",1,"right-arrow"],["alt","img",1,"img-fluid","selection-image",3,"src"],["href","javascript:void(0)",1,"right-arrow",3,"click"],[1,"ri-arrow-right-s-line"]],template:function(t,i){if(t&1&&(w(0,"li"),v(1,ee,2,1,"div",0),_(2),w(3,"a",1),F("click",function(){return i.select(i.data())}),_(4),f(),v(5,te,2,0,"a",2),f()),t&2){let g;r(),y(i.showImage()?1:-1),r(),I(" ",i.data()[i.key()]," "),r(),b("selected",i.selectedPillIds().includes(i.data().id)||i.parentId().includes(i.data().id)),r(),I(" ",i.selectedPillIds().includes(i.data().id)?"Selected":"Select"," "),r(),y((g=i.data()[i.subArrayKey()])!=null&&g.length?5:-1)}},encapsulation:2});let n=s;return n})();var ie=["dropdownContainer"],ne=["toggleButton"],oe=["items"];function se(n,s){if(n&1){let o=m();d(0,"li",14)(1,"span",15),_(2),d(3,"i",16),h("click",function(t){let i=c(o).$implicit;return a(2).removeItem(i),p(t.stopPropagation())}),u()()()}if(n&2){let o=s.$implicit,e=a(2);r(2),I("",o[e.displayKey()]," ")}}function re(n,s){if(n&1&&S(0,se,4,1,"li",14,V),n&2){let o=a();T(o.selectedPills)}}function ae(n,s){if(n&1){let o=m();d(0,"li",5)(1,"a",17),h("click",function(){c(o);let t=a();return p(t.clearOptions())}),_(2),D(3,"translate"),u()()}if(n&2){let o=a();r(2),C(x(3,1,o.text()?o.text():"select_option"))}}function le(n,s){n&1&&(d(0,"li",5)(1,"a",18),_(2),D(3,"translate"),u()()),n&2&&(r(2),C(x(3,1,"no_data_found")))}function de(n,s){if(n&1){let o=m();d(0,"li",5)(1,"a",17),h("click",function(){c(o);let t=a();return p(t.clearOptions())}),_(2),D(3,"translate"),u()()}n&2&&(r(2),C(x(3,1,"all")))}function ce(n,s){if(n&1){let o=m();d(0,"li",5)(1,"a",17),h("click",function(){let t=c(o).$implicit,i=a();return p(i.changeTo(t))}),_(2),u()()}if(n&2){let o=s.$implicit,e=a();r(2),C(o[e.displayKey()])}}function pe(n,s){if(n&1){let o=m();d(0,"app-dropdown-list",20),h("selected",function(t){c(o);let i=a(2);return p(i.onSelect(t))})("subItemClicked",function(t){c(o);let i=a(2);return p(i.subItemClicked(t))}),u()}if(n&2){let o=s.$implicit,e=a(2);O("key",e.displayKey())("data",o)("parentId",e.parent)("selectedPillIds",e.selectedIds)("subArrayKey",e.subArrayKey())("showImage",e.showImage())}}function ue(n,s){if(n&1&&(d(0,"div",13)(1,"ul"),S(2,pe,1,6,"app-dropdown-list",19,V),u()()),n&2){let o=a();r(2),T(o.optionsData)}}var Ie=(()=>{let s=class s{constructor(){this.dropdownContainer=K("dropdownContainer"),this.toggleButton=K("toggleButton"),this.items=K("items"),this.selectSingle=l(!1),this.displayKey=l("name"),this.subArrayKey=l(void 0),this.options=l(void 0),this.selectedOption=l(void 0),this.position=l("bottom"),this.text=l("select_option"),this.showImage=l(!0),this.selectedItem=k(),this.isOpen=!1,this.optionsData=[],this.selectedPills=[],this.selectedIds=[],this.breadCrumbValues=[],this.term=new U(""),this.parent=[],this.term.valueChanges.subscribe(e=>{e?(this.optionsData=[],this.options().forEach(t=>{this.hasValue(t)&&this.optionsData.push(t)})):this.optionsData=this.options()})}ngOnChanges(){this.optionsData=this.options(),this.selectedPills=[],this.selectedIds=[];let e=this.selectedOption();e?.length?this.getSelectedData(e):(this.selectedPills=[],this.selectedIds=[]),this.optionsData.map(t=>this.getParentIds(t))}getParentIds(e){e.subcategories&&e.subcategories.map(t=>{let i=this.selectedIds.includes(t.id)?e.id:null;i&&this.parent.push(i),this.getParentIds(t)})}getSelectedData(e){this.options().forEach(t=>{this.recursiveSelected(t,e.map(function(i){return parseInt(i)}))})}recursiveSelected(e,t){e.id&&t.includes(e.id)&&this.onSelect(e),e[this.subArrayKey()]?.length&&e[this.subArrayKey()].forEach(i=>{this.recursiveSelected(i,t)})}hasValue(e){let t=!1;return e[this.displayKey()].toLowerCase().includes(this.term?.value?.toLowerCase())&&(t=!0),e[this.subArrayKey()]?.length&&e[this.subArrayKey()].forEach(i=>{this.hasValue(i)&&(t=!0)}),t}toggleDropdown(e){this.isOpen=!this.isOpen;let t=this.dropdownContainer().nativeElement.querySelector(".dropdown-open");this.position()=="bottom"?(t.style.bottom="auto",t.style.top="100%"):(t.style.bottom="100%",t.style.top="auto")}onSelect(e){this.selectSingle()?(this.selectedPills=[],this.selectedIds=[],this.selectedPills.push(e),this.selectedIds.push(e.id)):this.selectedPills.indexOf(e)<0?(this.selectedPills.push(e),this.selectedIds.push(e.id)):e.selected||this.removeItem(e),this.selectedItem.emit(this.selectedIds)}removeItem(e){this.selectedPills.splice(this.selectedPills.indexOf(e),1),this.selectedIds.splice(this.selectedIds.indexOf(e.id),1),this.selectedItem.emit(this.selectedIds)}subItemClicked(e){this.isOpen=!0,e[this.subArrayKey()]?.length&&this.breadCrumbValues.push(e),e[this.subArrayKey()]?.length&&(this.optionsData=e[this.subArrayKey()])}changeTo(e){let t=this.subArrayKey();t&&(this.optionsData=e[t],this.breadCrumbValues.splice(this.breadCrumbValues.indexOf(e)+1,this.breadCrumbValues.length-this.breadCrumbValues.indexOf(e)))}clearOptions(){this.optionsData=this.options(),this.breadCrumbValues=[]}clickOutside(){this.isOpen=!1}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=A({type:s,selectors:[["app-advance-dropdown"]],viewQuery:function(t,i){t&1&&(E(i.dropdownContainer,ie,5),E(i.toggleButton,ne,5),E(i.items,oe,5)),t&2&&$(3)},inputs:{selectSingle:[1,"selectSingle"],displayKey:[1,"displayKey"],subArrayKey:[1,"subArrayKey"],options:[1,"options"],selectedOption:[1,"selectedOption"],position:[1,"position"],text:[1,"text"],showImage:[1,"showImage"]},outputs:{selectedItem:"selectedItem"},features:[L],decls:21,vars:13,consts:[["dropdownContainer",""],[3,"clickOutside"],[1,"position-relative"],[1,"category-breadcrumb-select",3,"click"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"cateogry-close-btn","d-inline-block",3,"click"],[1,"ri-arrow-down-s-line","down-arrow"],[1,"ri-close-line","close-arrow"],[1,"select-category-box","mt-2","dropdown-open"],[1,"form-control","search-input",3,"placeholder","formControl"],[1,"category-content"],["aria-label","breadcrumb",1,"category-breadcrumb"],[1,"category-listing"],[1,"breadcrumb-p","ills"],[1,"badge","badge-pill","badge-primary"],[1,"ri-close-line",3,"click"],["href","javascript:void(0)",3,"click"],["href","javascript:void(0)"],[3,"key","data","parentId","selectedPillIds","subArrayKey","showImage"],[3,"selected","subItemClicked","key","data","parentId","selectedPillIds","subArrayKey","showImage"]],template:function(t,i){if(t&1){let g=m();d(0,"div",1,0),h("clickOutside",function(){return c(g),p(i.clickOutside())}),d(2,"div",2)(3,"nav",3),h("click",function(P){return c(g),p(i.toggleDropdown(P))}),d(4,"ol",4),v(5,re,2,0)(6,ae,4,3,"li",5),u()(),d(7,"a",6),h("click",function(P){return c(g),p(i.toggleDropdown(P))}),M(8,"i",7)(9,"i",8),u(),d(10,"div",9),M(11,"input",10),D(12,"translate"),d(13,"div",11)(14,"nav",12)(15,"ol",4),v(16,le,4,3,"li",5),v(17,de,4,3,"li",5),S(18,ce,3,1,"li",5,V),u()(),v(20,ue,4,0,"div",13),u()()()()}t&2&&(r(5),y(i.selectedPills.length?5:6),r(2),b("show",i.isOpen),r(3),b("show",i.isOpen),r(),O("placeholder",q(x(12,11,"search_here")))("formControl",i.term),r(5),y(i.optionsData&&!i.optionsData.length?16:-1),r(),y(i.optionsData&&i.optionsData.length?17:-1),r(),T(i.breadCrumbValues),r(2),y(i.optionsData&&i.optionsData.length?20:-1))},dependencies:[X,H,R,z,J,G,Y,W],encapsulation:2});let n=s;return n})();export{Ie as a};

import{a as Ze}from"./chunk-EOJ72O7D.js";import{a as Qe}from"./chunk-RSBT43UQ.js";import{c as Xe,d as Ye,e as H}from"./chunk-L64HS5AO.js";import{a as Je,i as qe}from"./chunk-FDG3HQPX.js";import{b as Le}from"./chunk-I4EG6FBQ.js";import{b as je}from"./chunk-SPPECMGV.js";import{a as ze}from"./chunk-DRWHSBYU.js";import{a as We}from"./chunk-LCVX2N4P.js";import"./chunk-M3HD75V3.js";import{a as Ke}from"./chunk-Y2Z4WWCH.js";import"./chunk-QVI36XHK.js";import{l as Me,m as De}from"./chunk-HMBOAMDM.js";import{a as Ue}from"./chunk-7RQBIUSJ.js";import{a as $}from"./chunk-VO736VT2.js";import"./chunk-DNDGKAFO.js";import{a as Oe}from"./chunk-3ARB4UI6.js";import"./chunk-HD5XXWEJ.js";import"./chunk-HJPVTB2W.js";import{a as Re}from"./chunk-MLWMDQKS.js";import{a as He}from"./chunk-MPC4A6Z2.js";import"./chunk-Q3XL2YFP.js";import"./chunk-5DTRVH74.js";import"./chunk-GG7AHMIJ.js";import{$ as Ee,A as ge,B as he,C as be,D as ye,E as ve,F as xe,G as we,H as Ce,I as Fe,J as Be,X as Ne,Y as Se,Z as ke,_ as Ae,aa as Ie,ba as Ve,c as le,d as se,fa as Te,g as pe,h as ce,i as y,k as p,m as de,q as me,qa as A,r as _e,s as ue,t as fe}from"./chunk-IKKQDHIF.js";import{g as oe}from"./chunk-OTODDIHK.js";import"./chunk-EY6JDCC6.js";import{c as $e,d as Ge}from"./chunk-AWERIOQH.js";import{Ac as te,Ad as re,Bc as C,Ed as ae,Fc as k,Gc as D,Ib as I,J as U,Ja as L,Kb as V,Lc as c,Mb as J,Mc as d,Nb as q,Ob as Q,Pb as o,Pc as ie,Qb as l,Rb as a,Sb as f,Wb as X,Xb as Y,Za as K,_b as N,bb as n,bc as v,dc as _,g as R,gb as W,ja as b,mc as G,ob as z,qa as g,qc as M,ra as h,rc as x,sc as S,tc as T,td as ne,ub as w,uc as Z,va as j,x as O,yc as P,zc as ee}from"./chunk-KIZZVTEV.js";import"./chunk-4CLCTAJ7.js";var Pe=r=>[r],E=()=>[];function tt(r,u){if(r&1){let i=N();l(0,"app-form-fields",34)(1,"app-image-upload",35),v("selectedFiles",function(t){g(i);let s=_().$index,m=_(3);return h(m.selectHomeBannerArray(t,s))}),a()(),l(2,"app-link",36),c(3,"async"),c(4,"async"),v("productFilter",function(t){g(i);let s=_(4);return h(s.getProducts(t))}),a(),l(5,"app-form-fields",34)(6,"div",37)(7,"label",38),f(8,"input",39)(9,"span",40),a()()()}if(r&2){let i,e,t=_(),s=t.$implicit,m=t.$index,F=_(3);o("label","image")("for","image_url"),n(),o("url",!0)("multipleImage",!1)("accept",D(15,Pe,F.mediaConfig.image))("helpText","*Upload image size 376x231px recommended")("imageUrl",(i=F.form.get("content.home_banner.banners"))==null?null:i.value[m].image_url),n(),o("products",(e=d(3,11,F.product$))!=null&&e.length?d(4,13,F.product$):k(17,E))("linkForm",s.get("redirect_link")),n(3),o("label","status")("for","status"+m)}}function it(r,u){if(r&1){let i=N();l(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"div",27)(5,"button",28),x(6),c(7,"translate"),a()(),l(8,"div",29)(9,"div",30),w(10,tt,10,18,"ng-template"),a()()()()(),l(11,"div",31)(12,"a",32),v("click",function(){let t=g(i).$index,s=_(3);return h(s.removeHomeBanner(t))}),f(13,"i",33),a()()()}if(r&2){let i=u.$index;o("formGroupName",C(i)),n(3),o("collapsed",!1),n(3),Z(" ",d(7,5,"banner")," ",i+1," ")}}function nt(r,u){if(r&1&&(l(0,"div",21)(1,"div",22),X(2),q(3,it,14,7,"div",23,J),Y(),a()()),r&2){let i=_(2);n(3),Q(i.homeBannersArray.controls)}}function rt(r,u){if(r&1){let i=N();l(0,"div",19)(1,"app-button",20),v("click",function(t){g(i);let s=_();return h(s.addHomeBanner(t))}),x(2),c(3,"translate"),a(),I(4,nt,5,0,"div",21),a()}if(r&2){let i=_();n(),M("btn btn-animation mb-3"),o("id","add_banners_btn")("spinner",!1),n(),T(" ",d(3,6,"add_banners")," "),n(2),V(!(i.homeBannersArray==null||i.homeBannersArray.controls==null)&&i.homeBannersArray.controls.length?4:-1)}}function at(r,u){if(r&1&&(l(0,"div",47),f(1,"img",48),a(),x(2)),r&2){let i=u.data;n(),M("img-fluid selection-image"),o("src",i.image,K),n(),T(" ",i.name," ")}}function ot(r,u){if(r&1){let i=N();l(0,"select2",46),c(1,"translate"),c(2,"async"),c(3,"async"),c(4,"translate"),v("close",function(t){g(i);let s=_(2);return h(s.productDropdown(t))})("search",function(t){g(i);let s=_(2);return h(s.searchProduct(t))}),w(5,at,3,4,"ng-template",null,1,ie),a()}if(r&2){let i,e=G(6),t=_(2);o("noResultMessage",C(d(1,6,"no_data_found")))("templates",e)("data",(i=d(2,8,t.product$))!=null&&i.length?d(3,10,t.product$):k(14,E))("placeholder",d(4,12,"select_product"))("customSearchEnabled",!0)}}function lt(r,u){if(r&1&&(l(0,"div",41)(1,"app-form-fields",34),f(2,"input",42),c(3,"translate"),a(),l(4,"app-form-fields",34),f(5,"input",43),c(6,"translate"),a(),l(7,"app-form-fields",34),f(8,"input",44),c(9,"translate"),a(),l(10,"app-form-fields",34),I(11,ot,7,15,"select2",45),a(),l(12,"app-form-fields",34)(13,"div",37)(14,"label",38),f(15,"input",39)(16,"span",40),a()()()()),r&2){let i=_();n(),o("label","tag")("for","tag"),n(),o("placeholder",C(d(3,17,"enter_tag"))),n(2),o("label","title")("for","title"),n(),o("placeholder",C(d(6,19,"enter_title"))),n(2),o("label","description")("for","description"),n(),o("placeholder",C(d(9,21,"enter_description"))),n(2),o("label","product")("for","product_ids"),n(),V(i.isBrowser?11:-1),n(),o("label","status")("for","status")}}function st(r,u){if(r&1){let i=N();l(0,"div",49)(1,"app-form-fields",34)(2,"div",37)(3,"label",38),f(4,"input",39)(5,"span",40),a()()(),l(6,"app-form-fields",34)(7,"app-image-upload",35),v("selectedFiles",function(t){g(i);let s=_();return h(s.selectImage(t,"content.full_banner.image_url"))}),a()(),l(8,"app-link",36),c(9,"async"),c(10,"async"),v("productFilter",function(t){g(i);let s=_();return h(s.getProducts(t))}),a()()}if(r&2){let i,e,t=_();n(),o("label","status")("for","status"),n(5),o("label","image")("for","image_url"),n(),o("url",!0)("multipleImage",!1)("accept",D(15,Pe,t.mediaConfig.image))("helpText","*Upload image size 1920x1018px recommended")("imageUrl",(i=t.form.get("content.full_banner.image_url"))==null?null:i.value),n(),o("products",(e=d(9,11,t.product$))!=null&&e.length?d(10,13,t.product$):k(17,E))("linkForm",t.form.get("content.full_banner.redirect_link"))}}function pt(r,u){if(r&1){let i=N();l(0,"div",50)(1,"app-form-fields",34),f(2,"input",42),c(3,"translate"),a(),l(4,"app-form-fields",34),f(5,"input",43),c(6,"translate"),a(),l(7,"app-form-fields",34)(8,"app-advance-dropdown",51),c(9,"async"),c(10,"async"),v("selectedItem",function(t){g(i);let s=_();return h(s.selectCategoryItem(t,"content.category_product.category_ids"))}),a()(),l(11,"app-form-fields",34)(12,"div",37)(13,"label",38),f(14,"input",39)(15,"span",40),a()()()()}if(r&2){let i,e=_();n(),o("label","tag")("for","tag"),n(),o("placeholder",C(d(3,16,"enter_tag"))),n(2),o("label","title")("for","title"),n(),o("placeholder",C(d(6,18,"enter_title"))),n(2),o("label","categories")("for","type"),n(),o("position","bottom")("selectedOption",e.selectedCategories)("options",!((i=d(9,20,e.category$))==null||i.data==null)&&i.data.length?(i=d(10,22,e.category$))==null?null:i.data:k(24,E))("subArrayKey","subcategories"),n(3),o("label","status")("for","status")}}function ct(r,u){if(r&1&&(f(0,"select2",53),c(1,"translate"),c(2,"async"),c(3,"async"),c(4,"translate")),r&2){let i,e=_(2);o("noResultMessage",C(d(1,4,"no_data_found")))("data",(i=d(2,6,e.brand$))!=null&&i.length?d(3,8,e.brand$):k(12,E))("placeholder",d(4,10,"select_brand"))}}function dt(r,u){if(r&1&&(l(0,"div",52)(1,"app-form-fields",34),I(2,ct,5,13,"select2",53),a(),l(3,"app-form-fields",34)(4,"div",37)(5,"label",38),f(6,"input",39)(7,"span",40),a()()()()),r&2){let i=_();n(),o("label","brand")("for","type"),n(),V(i.isBrowser?2:-1),n(),o("label","status")("for","status")}}function mt(r,u){r&1&&(l(0,"app-button",54),x(1),c(2,"translate"),a()),r&2&&(o("id","theme_3_submit"),n(),T(" ",d(2,2,"submit")," "))}var Wt=(()=>{let u=class u{constructor(){this.store=b(A),this.formBuilder=b(he),this.router=b(oe),this.renderer=b(W),this.document=b(j),this.home_page$=b(A).select(H.homePage),this.product$=b(A).select(Le.products),this.category$=b(A).select(je.category),this.brand$=b(A).select(qe.brands),this.active="home_banner",this.banner=1,this.mediaConfig=We,this.selectedCategories=[],this.search=new R,this.filter={status:1,search:"",paginate:15,ids:"",with_union_products:0,is_approved:1};let e=b(L);this.isBrowser=ae(e),this.form=new y({content:new y({home_banner:new y({status:new p(!0),banners:new ge([])}),products_list:new y({tag:new p(""),title:new p(""),description:new p(""),product_ids:new p([]),status:new p(!0)}),full_banner:new y({image_url:new p(""),status:new p(!0),redirect_link:new y({link:new p(""),link_type:new p(""),product_ids:new p("")})}),category_product:new y({tag:new p(""),title:new p(""),category_ids:new p([]),status:new p(!0)}),brand:new y({brand_ids:new p(""),status:new p(!1)}),products_ids:new p([])}),slug:new p("fashion_three")})}ngOnInit(){let e=this.store.dispatch(new Xe({slug:"fashion_three"})),t=this.store.dispatch(new Ue({status:1,type:"product"})),s=this.store.dispatch(new Je({status:1}));O([e,t,s]).subscribe({complete:()=>{this.store.select(H.homePage).subscribe({next:m=>{m?.content?.products_ids&&(this.filter.paginate=m?.content?.products_ids?.length>=15?m?.content?.products_ids?.length:15,this.filter.ids=m?.content?.products_ids?.join(),this.filter.with_union_products=m?.content?.products_ids?.length?m?.content?.products_ids?.length>=15?0:1:0),this.store.dispatch(new $(this.filter)).subscribe({complete:()=>{this.patchForm()}})}})}}),this.search.pipe(U(300)).subscribe(m=>{this.store.dispatch(new $({status:1,is_approved:1,paginate:15,search:m})),this.renderer.addClass(this.document.body,"loader-none")})}patchForm(){this.home_page$.subscribe(e=>{this.page_data=e,this.selectedCategories=e?.content?.category_product?.category_ids||[],this.form.patchValue({content:{home_banner:{status:e?.content?.home_banner?.status},products_list:{tag:e?.content?.products_list?.tag,title:e?.content?.products_list?.title,description:e?.content?.products_list?.description,product_ids:e?.content?.products_list?.product_ids,status:e?.content?.products_list?.status},full_banner:{image_url:e?.content?.full_banner?.image_url,status:e?.content?.full_banner?.status,redirect_link:{link:e?.content?.full_banner?.redirect_link?.link,link_type:e?.content?.full_banner?.redirect_link?.link_type,product_ids:e?.content?.full_banner?.redirect_link?.product_ids}},category_product:{tag:e?.content?.category_product?.tag,title:e?.content?.category_product?.title,category_ids:e?.content?.category_product?.category_ids,status:e?.content?.category_product?.status},brand:{brand_ids:e?.content?.brand?.brand_ids,status:e?.content?.brand?.status},products_ids:e?.content?.products_ids},slug:e?.slug}),this.homeBannersArray.clear(),e?.content?.home_banner?.banners?.forEach(t=>this.homeBannersArray.push(this.formBuilder.group({redirect_link:new y({link:new p(t?.redirect_link?.link),link_type:new p(t?.redirect_link?.link_type)}),status:new p(t?.status),image_url:new p(t?.image_url)})))})}selectCategoryItem(e,t){Array.isArray(e)&&this.form.get(t)?.setValue(e)}getProducts(e){this.filter.search=e.search,this.filter.ids=this.filter.search.length?"":this.page_data?.content?.products_ids?.join(),this.filter.paginate=this.page_data?.content?.products_ids?.length>=15?this.page_data?.content?.products_ids?.length:15,this.store.dispatch(new $(this.filter)),this.renderer.addClass(this.document.body,"loader-none")}productDropdown(e){e.innerSearchText&&(this.search.next(""),this.getProducts(this.filter))}searchProduct(e){this.search.next(e.search)}get homeBannersArray(){return this.form.get("content.home_banner.banners")}addHomeBanner(e){e.preventDefault(),this.homeBannersArray.push(this.formBuilder.group({redirect_link:new y({link:new p(""),link_type:new p(""),product_ids:new p("")}),image_url:new p,status:new p(!0)}))}selectHomeBannerArray(e,t){this.homeBannersArray.at(t).get("image_url")?.setValue(e||null)}selectImage(e,t){this.form.get(t)?.setValue(e||null)}removeHomeBanner(e){this.homeBannersArray.length<=1||this.homeBannersArray.removeAt(e)}concatDynamicProductKeys(e){let t=[];function s(m){if(Array.isArray(m))m.forEach(s);else if(m!==null&&typeof m=="object")for(let[F,B]of Object.entries(m))F==="product_ids"&&Array.isArray(B)&&B.every(et=>typeof et=="number")?t.push(...B):s(B)}return s(e),t}submit(){let e=Array.from(new Set(this.concatDynamicProductKeys(this.form.value)));this.form.get("content.products_ids")?.setValue(e),this.form.valid&&this.store.dispatch(new Ye(this.page_data.id,this.form.value))}};u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=z({type:u,selectors:[["app-fashion-3"]],decls:40,vars:21,consts:[["nav","ngbNav"],["template",""],[3,"gridClass","title"],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[1,"vertical-tabs"],[1,"row"],[1,"col-xl-3","col-lg-4"],["ngbNav","","orientation","vertical","formGroupName","content",1,"nav-pills",3,"activeIdChange","activeId"],["ngbNavItem","home_banner"],["ngbNavLink",""],[1,"ri-record-circle-line"],["ngbNavContent",""],["ngbNavItem","products_list"],["ngbNavItem","full_banner"],["ngbNavItem","category_product"],["ngbNavItem","brand"],[1,"col-xl-7","col-lg-8"],[3,"ngbNavOutlet"],[3,"id",4,"hasPermission"],["formGroupName","home_banner"],[3,"click","id","spinner"],[1,"shipping-accordion","variant-accordion"],["formArrayName","banners"],[1,"d-flex",3,"formGroupName"],[1,"col-11"],["ngbAccordion",""],["ngbAccordionItem","",3,"collapsed"],["ngbAccordionHeader",""],["ngbAccordionButton",""],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[1,"col-1","text-center","fs-20"],["href","javascript:void(0)",1,"invalid-feedback","text-end","cursor-pointer","d-inline-block","w-auto","mt-2",3,"click"],[1,"ri-close-line"],[3,"label","for"],[3,"selectedFiles","url","multipleImage","accept","helpText","imageUrl"],[3,"productFilter","products","linkForm"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],["formGroupName","products_list"],["id","tag","type","text","formControlName","tag",1,"form-control",3,"placeholder"],["id","title","type","text","formControlName","title",1,"form-control",3,"placeholder"],["id","description","type","text","formControlName","description",1,"form-control",3,"placeholder"],["formControlName","product_ids","multiple","true","resettable","",1,"custom-select",3,"templates","data","placeholder","noResultMessage","customSearchEnabled"],["formControlName","product_ids","multiple","true","resettable","",1,"custom-select",3,"close","search","templates","data","placeholder","noResultMessage","customSearchEnabled"],[1,"image"],["alt","img",3,"src"],["formGroupName","full_banner"],["formGroupName","category_product"],[3,"selectedItem","position","selectedOption","options","subArrayKey"],["formGroupName","brand"],["formControlName","brand_ids","multiple","true",1,"custom-select",3,"data","placeholder","noResultMessage"],[3,"id"]],template:function(t,s){if(t&1){let m=N();l(0,"app-page-wrapper",2)(1,"form",3),v("ngSubmit",function(){return g(m),h(s.submit())}),l(2,"div",4)(3,"div",5)(4,"div",6)(5,"ul",7,0),te("activeIdChange",function(B){return g(m),ee(s.active,B)||(s.active=B),h(B)}),l(7,"li",8)(8,"a",9),f(9,"i",10),x(10),c(11,"translate"),a(),w(12,rt,5,8,"ng-template",11),a(),l(13,"li",12)(14,"a",9),f(15,"i",10),x(16),c(17,"translate"),a(),w(18,lt,17,23,"ng-template",11),a(),l(19,"li",13)(20,"a",9),f(21,"i",10),x(22),c(23,"translate"),a(),w(24,st,11,18,"ng-template",11),a(),l(25,"li",14)(26,"a",9),f(27,"i",10),x(28),c(29,"translate"),a(),w(30,pt,16,25,"ng-template",11),a(),l(31,"li",15)(32,"a",9),f(33,"i",10),x(34),c(35,"translate"),a(),w(36,dt,8,5,"ng-template",11),a()()(),l(37,"div",16),f(38,"div",17),a()(),w(39,mt,3,4,"app-button",18),a()()()}if(t&2){let m=G(6);o("gridClass","col-sm-12")("title","fashion_3_settings"),n(),o("formGroup",s.form),n(4),P("activeId",s.active),n(5),S(d(11,11,"home_banner")),n(6),S(d(17,13,"products_list")),n(6),S(d(23,15,"full_banner")),n(6),S(d(29,17,"category_product")),n(6),S(d(35,19,"brand")),n(4),o("ngbNavOutlet",m),n(),o("hasPermission","theme.edit")}},dependencies:[re,Ge,be,de,se,le,pe,ce,ye,me,fe,_e,ue,De,Me,Oe,Te,we,Be,Fe,Ce,ve,xe,Ne,Ae,ke,Se,Ie,Ee,Ve,He,Re,Ke,Ze,ze,Qe,ne,$e],encapsulation:2});let r=u;return r})();export{Wt as Fashion3};

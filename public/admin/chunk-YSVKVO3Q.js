import{a as we,b as Be,c as Ee,d as Fe}from"./chunk-OZNJGL5F.js";import{a as Se}from"./chunk-RSBT43UQ.js";import{a as Te}from"./chunk-Z567FFSJ.js";import{a as V}from"./chunk-N7TZOU7O.js";import{b as ue,c as fe,d as _e}from"./chunk-Q2HG4MQ4.js";import{b as he}from"./chunk-SPPECMGV.js";import{a as ve}from"./chunk-DRWHSBYU.js";import{a as Ce}from"./chunk-LCVX2N4P.js";import{a as ye}from"./chunk-Y2Z4WWCH.js";import{a as be}from"./chunk-VPYJY44D.js";import{a as ge}from"./chunk-7RQBIUSJ.js";import{a as ce}from"./chunk-MLWMDQKS.js";import{B as le,C as se,D as pe,c as Y,d as Z,e as N,g as ee,h as te,k as m,l as ie,m as oe,p as re,q as ne,qa as B,t as ae}from"./chunk-IKKQDHIF.js";import{e as Q,g as X}from"./chunk-OTODDIHK.js";import{c as de,d as me}from"./chunk-AWERIOQH.js";import{Ac as q,Ad as H,Bc as C,Ed as J,Fc as S,Gc as x,Ib as b,Ja as R,Kb as w,Lc as s,Mc as p,Pb as o,Qb as n,Rb as r,Sb as c,Y as P,Yc as j,Z as W,_b as L,bb as i,bc as g,dc as E,g as O,ja as _,n as $,ob as U,od as K,qa as T,ra as M,rc as y,sc as F,t as G,tc as k,td as z,yc as A,zc as I}from"./chunk-KIZZVTEV.js";var Ae=()=>({standalone:!0}),Me=l=>[l],ke=()=>[];function Ie(l,u){l&1&&(n(0,"div",3),y(1),s(2,"translate"),r()),l&2&&(i(),F(p(2,1,"title_is_required")))}function qe(l,u){if(l&1){let h=L();c(0,"ngx-editor-menu",30),n(1,"ngx-editor",31),q("ngModelChange",function(d){T(h);let t=E();return I(t.html,d)||(t.html=d),M(d)}),g("ngModelChange",function(d){T(h);let t=E();return M(t.getData(d))}),r()}if(l&2){let h=E();o("editor",h.editor),i(),o("editor",h.editor)("placeholder","Type here..."),A("ngModel",h.html)}}function xe(l,u){l&1&&(n(0,"div",3),y(1),s(2,"translate"),r()),l&2&&(i(),F(p(2,1,"thumbnail_is_required")))}function Ne(l,u){l&1&&(n(0,"div",3),y(1),s(2,"translate"),r()),l&2&&(i(),F(p(2,1,"select_category_is_required")))}var at=(()=>{let u=class u{constructor(){this.store=_(B),this.route=_(Q),this.router=_(X),this.formBuilder=_(le),this.type=j(void 0),this.blog$=_(B).select(V.selectedBlog),this.category$=_(B).select(he.category),this.tag$=_(B).select(Te.tag),this.selectedCategories=[],this.selectedTags=[],this.mediaConfig=Ce,this.textArea=new m(""),this.isCodeEditor=!0,this.html="",this.destroy$=new O;let e=_(R);this.isBrowser=J(e),this.store.dispatch(new ge({type:"post"})),this.store.dispatch(new be({type:"post"})),this.form=this.formBuilder.group({title:new m("",[N.required]),description:new m,content:new m,meta_title:new m,meta_description:new m,blog_thumbnail_id:new m("",[N.required]),blog_meta_image_id:new m(""),categories:new m,tags:new m,is_featured:new m(0),is_sticky:new m(0),status:new m(1)})}ngOnInit(){this.route.params.pipe(P(e=>e.id?this.store.dispatch(new fe(e.id)).pipe(G(()=>this.store.select(V.selectedBlog))):$()),W(this.destroy$)).subscribe(e=>{this.id=e?.id,this.selectedCategories=e?.categories.map(d=>d?.id),this.selectedTags=e?.tags.map(d=>d?.id),this.form.patchValue({title:e?.title,description:e?.description,content:e?.content,blog_thumbnail_id:e?.blog_thumbnail_id,categories:this.selectedCategories,tags:this.selectedTags,blog_meta_image_id:e?.blog_meta_image_id,meta_title:e?.meta_title,meta_description:e?.meta_description,is_featured:e?.is_featured,is_sticky:e?.is_sticky,status:e?.status})}),this.isBrowser&&(this.editor=new Fe)}selectThumbnail(e){Array.isArray(e)||this.form.controls.blog_thumbnail_id.setValue(e?e.id:"")}selectMetaImage(e){Array.isArray(e)||this.form.controls.blog_meta_image_id.setValue(e?e.id:null)}selectCategoryItem(e){Array.isArray(e)&&this.form.controls.categories.setValue(e)}selectTagItem(e){Array.isArray(e)&&this.form.controls.tags.setValue(e)}getText(e){this.form.controls.content.setValue(this.textArea.value)}getData(e){this.textArea.setValue(this.html)}submit(){this.form.markAllAsTouched();let e=new ue(this.form.value);this.type()=="edit"&&this.id&&(e=new _e(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/blog")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};u.\u0275fac=function(d){return new(d||u)},u.\u0275cmp=U({type:u,selectors:[["app-form-blog"]],inputs:{type:[1,"type"]},decls:65,vars:105,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],[1,"invalid-feedback"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[1,"custom-editor","editor-checkbox"],[1,"form-check","form-switch"],["id","ckcheck","type","checkbox","name","isCodeEditor",1,"form-check-input",3,"ngModelChange","ngModel","ngModelOptions"],["for","ckcheck",1,"cursor-pointer"],[1,"edit"],[1,"ri-edit-box-line"],[1,"code"],[1,"ri-code-s-slash-line"],[3,"ngClass"],[1,"editor-textarea",3,"ngClass"],["id","content","rows","3",1,"form-control",3,"keyup","placeholder","formControl"],[1,"mt-2"],[3,"selectedFiles","multipleImage","accept","image"],[3,"selectedItem","position","selectedOption","options","subArrayKey"],[3,"selectedItem","position","selectedOption","options"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","is_featured","formControlName","is_featured"],[1,"switch-state"],["type","checkbox","id","is_sticky","formControlName","is_sticky"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"selectedFiles","accept","multipleImage","image"],["type","checkbox","id","status","formControlName","status"],[3,"id"],[3,"editor"],["formControlName","content",3,"ngModelChange","editor","placeholder","ngModel"]],template:function(d,t){if(d&1&&(n(0,"form",0),g("ngSubmit",function(){return t.submit()}),n(1,"app-form-fields",1),c(2,"input",2),s(3,"translate"),b(4,Ie,3,3,"div",3),r(),n(5,"app-form-fields",1),c(6,"textarea",4),s(7,"translate"),r(),n(8,"app-form-fields",1)(9,"div",5)(10,"div",6)(11,"input",7),q("ngModelChange",function(a){return I(t.isCodeEditor,a)||(t.isCodeEditor=a),a}),r(),n(12,"label",8)(13,"span",9),c(14,"i",10),r(),n(15,"span",11),c(16,"i",12),r()()(),n(17,"div",13),b(18,qe,2,4),r(),n(19,"div",14)(20,"textarea",15),s(21,"translate"),g("keyup",function(a){return t.getText(a)}),r(),n(22,"p",16),y(23),s(24,"translate"),r()()()(),n(25,"app-form-fields",1)(26,"app-image-upload",17),s(27,"async"),g("selectedFiles",function(a){return t.selectThumbnail(a)}),r(),b(28,xe,3,3,"div",3),r(),n(29,"app-form-fields",1)(30,"app-advance-dropdown",18),s(31,"async"),s(32,"async"),g("selectedItem",function(a){return t.selectCategoryItem(a)}),r(),b(33,Ne,3,3,"div",3),r(),n(34,"app-form-fields",1)(35,"app-advance-dropdown",19),s(36,"async"),s(37,"async"),g("selectedItem",function(a){return t.selectTagItem(a)}),r()(),n(38,"app-form-fields",1)(39,"div",20)(40,"label",21),c(41,"input",22)(42,"span",23),r()()(),n(43,"app-form-fields",1)(44,"div",20)(45,"label",21),c(46,"input",24)(47,"span",23),r()()(),n(48,"app-form-fields",1),c(49,"input",25),s(50,"translate"),r(),n(51,"app-form-fields",1),c(52,"textarea",26),s(53,"translate"),r(),n(54,"app-form-fields",1)(55,"app-image-upload",27),s(56,"async"),g("selectedFiles",function(a){return t.selectMetaImage(a)}),r()(),n(57,"app-form-fields",1)(58,"div",20)(59,"label",21),c(60,"input",28)(61,"span",23),r()()(),n(62,"app-button",29),y(63),s(64,"translate"),r()()),d&2){let f,a,v,D;o("formGroup",t.form),i(),o("label","title")("for","title")("required",!0),i(),o("placeholder",C(p(3,72,"enter_blog_title"))),i(2),w(t.form.controls.title.touched&&(t.form.controls.title.errors!=null&&t.form.controls.title.errors.required)?4:-1),i(),o("label","description")("for","desc")("required",!1),i(),o("placeholder",C(p(7,74,"enter_blog_description"))),i(2),o("label","content")("for","content")("required",!1),i(3),A("ngModel",t.isCodeEditor),o("ngModelOptions",S(98,Ae)),i(6),o("ngClass",t.isCodeEditor?"d-block":"d-none"),i(),w(t.isBrowser?18:-1),i(),o("ngClass",t.isCodeEditor?"d-none":"d-block"),i(),o("placeholder",C(p(21,76,"enter_html_content")))("formControl",t.textArea),i(3),k("*",p(24,78,"only_accept_html_tags")),i(2),o("label","thumbnail")("for","image")("required",!0),i(),o("multipleImage",!1)("accept",x(99,Me,t.mediaConfig.image))("image",(f=p(27,80,t.blog$))==null?null:f.blog_thumbnail),i(2),w(t.form.controls.blog_thumbnail_id.touched&&(t.form.controls.blog_thumbnail_id.errors!=null&&t.form.controls.blog_thumbnail_id.errors.required)?28:-1),i(),o("label","select_categories")("for","category")("required",!0),i(),o("position","top")("selectedOption",t.selectedCategories)("options",!((a=p(31,82,t.category$))==null||a.data==null)&&a.data.length?(a=p(32,84,t.category$))==null?null:a.data:S(101,ke))("subArrayKey","subcategories"),i(3),w(t.form.controls.categories.touched&&(t.form.controls.categories.errors!=null&&t.form.controls.categories.errors.required)?33:-1),i(),o("label","select_tags")("for","tag")("required",!1),i(),o("position","top")("selectedOption",t.selectedTags)("options",!((v=p(36,86,t.tag$))==null||v.data==null)&&v.data.length?(v=p(37,88,t.tag$))==null?null:v.data:S(102,ke)),i(3),o("label","featured")("for","is_featured")("required",!1),i(5),o("label","sticky")("for","is_sticky")("required",!1),i(5),o("label","meta_title")("for","meta_title")("required",!1),i(),o("placeholder",C(p(50,90,"enter_meta_title"))),i(2),o("label","meta_description")("for","meta_description")("required",!1),i(),o("placeholder",C(p(53,92,"enter_meta_description"))),i(2),o("label","meta_image")("for","meta_image")("required",!1),i(),o("accept",x(103,Me,t.mediaConfig.image))("multipleImage",!1)("image",(D=p(56,94,t.blog$))==null?null:D.blog_meta_image),i(2),o("label","status")("for","status")("required",!1),i(5),o("id","blog_btn"),i(),k(" ",p(64,96,t.type()==="create"?"save_blog":"update_blog")," ")}},dependencies:[H,K,me,se,oe,Z,Y,ee,te,ie,pe,re,ne,ae,Ee,we,Be,ye,ve,Se,ce,z,de],encapsulation:2});let l=u;return l})();export{at as a};

import{a as S,b as _,c as x,d as w,e as j,f as I,g as E,h as V,i as U,j as N}from"./chunk-WPAIU3ME.js";import{a as f}from"./chunk-GG7AHMIJ.js";import{Ia as g,qa as v,sa as o,ta as y,ua as c}from"./chunk-IKKQDHIF.js";import{d as h}from"./chunk-EY6JDCC6.js";import{$ as p,ea as b,ja as s,l as i}from"./chunk-KIZZVTEV.js";import{a as m,b as A}from"./chunk-4CLCTAJ7.js";var k=(()=>{let t=class t{constructor(){this.http=s(h)}getAttributes(e){return this.http.get(`${f.URL}/attribute.json`,{params:e})}getAttributeValues(e){return this.http.get(`${f.URL}/attribute-value.json`,{params:e})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let d=t;return d})();var u,a=(u=class{constructor(){this.store=s(v),this.notificationService=s(g),this.attributeService=s(k)}static attribute(t){return t.attribute}static attributes(t){return r=>{let e=Array.from(new Set(r.split(","))).map(Number);return(e.length?t.attribute.data.filter(l=>!e.includes(Number(l.id))):t.attribute.data).map(l=>({label:l?.name,value:l?.id,attribute_values:l?.attribute_values}))}}static attribute_value(t){return r=>r?t?.attribute_values.filter(e=>+e.attribute_id===r)?.map(e=>({label:e?.value,value:e?.id})):[]}static selectedAttribute(t){return t.selectedAttribute}getAttributes(t,r){return this.attributeService.getAttributes(r.payload).pipe(p({next:e=>{t.patchState({attribute:{data:e.data,total:e?.total?e?.total:e.data.length}})},error:e=>{throw new Error(e?.error?.message)}}))}getAttributeValues(t,r){return this.attributeService.getAttributeValues(r.payload).pipe(p({next:e=>{let n=t.getState();t.patchState(A(m({},n),{attribute_values:e.data}))},error:e=>{throw new Error(e?.error?.message)}}))}create(t,r){}edit(t,{id:r}){return this.attributeService.getAttributes().pipe(p({next:e=>{let n=t.getState(),l=e.data.find(C=>C.id==r);t.patchState(A(m({},n),{selectedAttribute:l}))},error:e=>{throw new Error(e?.error?.message)}}))}update(t,{payload:r,id:e}){}updateStatus(t,{id:r,status:e}){}delete(t,{id:r}){}deleteAll(t,{ids:r}){}import(t,r){}export(t,r){}},u.\u0275fac=function(r){return new(r||u)},u.\u0275prov=b({token:u,factory:u.\u0275fac}),u);i([o(S)],a.prototype,"getAttributes",null);i([o(_)],a.prototype,"getAttributeValues",null);i([o(x)],a.prototype,"create",null);i([o(w)],a.prototype,"edit",null);i([o(j)],a.prototype,"update",null);i([o(I)],a.prototype,"updateStatus",null);i([o(E)],a.prototype,"delete",null);i([o(V)],a.prototype,"deleteAll",null);i([o(U)],a.prototype,"import",null);i([o(N)],a.prototype,"export",null);i([c()],a,"attribute",null);i([c()],a,"attributes",null);i([c()],a,"attribute_value",null);i([c()],a,"selectedAttribute",null);a=i([y({name:"attribute",defaults:{attribute:{data:[],total:0},attribute_values:[],selectedAttribute:null}})],a);export{a};
